#!/usr/bin/env python

"""
Run PyLint and view HTML output.

USAGE: See pylint --help.
"""

import os
import sys
import tempfile

tool_dir = os.path.dirname(os.path.abspath(__file__))
lib_dir  = os.path.join(tool_dir, '..', 'lib')
sys.path.insert(0, lib_dir)
os.environ['PYTHONPATH'] = lib_dir + ':' + os.environ['PYTHONPATH']

from gaupol.base.util import wwwlib

temp_dir = tempfile.gettempdir()
report_path = os.path.join(temp_dir, 'gaupol.pylint')

fobj = os.popen('pylint %s' % ' '.join(sys.argv[1:]))
output = fobj.read()
fobj.close()
fobj = open(report_path, 'w')
fobj.write(output)
fobj.close()

wwwlib.browse_url(report_path)
