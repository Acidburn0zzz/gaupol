<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head>
  <title>gaupol.gtk.conf.validate</title>
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
  <link rel="stylesheet" type="text/css" href="code.css" />
</head>
<body>
<pre>
<a name="L1" class="line-number">   1 </a><span class="python-comment"># validate.py</span>
<a name="L2" class="line-number">   2 </a><span class="python-comment"># A Validator object</span>
<a name="L3" class="line-number">   3 </a><span class="python-comment"># Copyright (C) 2005 Michael Foord, Mark Andrews, Nicola Larosa</span>
<a name="L4" class="line-number">   4 </a><span class="python-comment"># E-mail: fuzzyman AT voidspace DOT org DOT uk</span>
<a name="L5" class="line-number">   5 </a><span class="python-comment">#         mark AT la-la DOT com</span>
<a name="L6" class="line-number">   6 </a><span class="python-comment">#         nico AT tekNico DOT net</span>
<a name="L7" class="line-number">   7 </a>
<a name="L8" class="line-number">   8 </a><span class="python-comment"># This software is licensed under the terms of the BSD license.</span>
<a name="L9" class="line-number">   9 </a><span class="python-comment"># http://www.voidspace.org.uk/python/license.shtml</span>
<a name="L10" class="line-number">  10 </a><span class="python-comment"># Basically you're free to copy, modify, distribute and relicense it,</span>
<a name="L11" class="line-number">  11 </a><span class="python-comment"># So long as you keep a copy of the license with it.</span>
<a name="L12" class="line-number">  12 </a>
<a name="L13" class="line-number">  13 </a><span class="python-comment"># Scripts maintained at http://www.voidspace.org.uk/python/index.shtml</span>
<a name="L14" class="line-number">  14 </a><span class="python-comment"># For information about bugfixes, updates and support, please join the</span>
<a name="L15" class="line-number">  15 </a><span class="python-comment"># ConfigObj mailing list:</span>
<a name="L16" class="line-number">  16 </a><span class="python-comment"># http://lists.sourceforge.net/lists/listinfo/configobj-develop</span>
<a name="L17" class="line-number">  17 </a><span class="python-comment"># Comments, suggestions and bug reports welcome.</span>
<a name="L18" class="line-number">  18 </a>
<a name="L19" class="line-number">  19 </a><span class="python-string">"""
<a name="L20" class="line-number">  20 </a>    The Validator object is used to check that supplied values 
<a name="L21" class="line-number">  21 </a>    conform to a specification.
<a name="L22" class="line-number">  22 </a>    
<a name="L23" class="line-number">  23 </a>    The value can be supplied as a string - e.g. from a config file.
<a name="L24" class="line-number">  24 </a>    In this case the check will also *convert* the value to
<a name="L25" class="line-number">  25 </a>    the required type. This allows you to add validation
<a name="L26" class="line-number">  26 </a>    as a transparent layer to access data stored as strings.
<a name="L27" class="line-number">  27 </a>    The validation checks that the data is correct *and*
<a name="L28" class="line-number">  28 </a>    converts it to the expected type.
<a name="L29" class="line-number">  29 </a>    
<a name="L30" class="line-number">  30 </a>    Some standard checks are provided for basic data types.
<a name="L31" class="line-number">  31 </a>    Additional checks are easy to write. They can be
<a name="L32" class="line-number">  32 </a>    provided when the ``Validator`` is instantiated or
<a name="L33" class="line-number">  33 </a>    added afterwards.
<a name="L34" class="line-number">  34 </a>    
<a name="L35" class="line-number">  35 </a>    The standard functions work with the following basic data types :
<a name="L36" class="line-number">  36 </a>    
<a name="L37" class="line-number">  37 </a>    * integers
<a name="L38" class="line-number">  38 </a>    * floats
<a name="L39" class="line-number">  39 </a>    * booleans
<a name="L40" class="line-number">  40 </a>    * strings
<a name="L41" class="line-number">  41 </a>    * ip_addr
<a name="L42" class="line-number">  42 </a>    
<a name="L43" class="line-number">  43 </a>    plus lists of these datatypes
<a name="L44" class="line-number">  44 </a>    
<a name="L45" class="line-number">  45 </a>    Adding additional checks is done through coding simple functions.
<a name="L46" class="line-number">  46 </a>    
<a name="L47" class="line-number">  47 </a>    The full set of standard checks are : 
<a name="L48" class="line-number">  48 </a>    
<a name="L49" class="line-number">  49 </a>    * 'integer': matches integer values (including negative)
<a name="L50" class="line-number">  50 </a>                 Takes optional 'min' and 'max' arguments : ::
<a name="L51" class="line-number">  51 </a>    
<a name="L52" class="line-number">  52 </a>                   integer()
<a name="L53" class="line-number">  53 </a>                   integer(3, 9)  # any value from 3 to 9
<a name="L54" class="line-number">  54 </a>                   integer(min=0) # any positive value
<a name="L55" class="line-number">  55 </a>                   integer(max=9)
<a name="L56" class="line-number">  56 </a>    
<a name="L57" class="line-number">  57 </a>    * 'float': matches float values
<a name="L58" class="line-number">  58 </a>               Has the same parameters as the integer check.
<a name="L59" class="line-number">  59 </a>    
<a name="L60" class="line-number">  60 </a>    * 'boolean': matches boolean values - ``True`` or ``False``
<a name="L61" class="line-number">  61 </a>                 Acceptable string values for True are :
<a name="L62" class="line-number">  62 </a>                   true, on, yes, 1
<a name="L63" class="line-number">  63 </a>                 Acceptable string values for False are :
<a name="L64" class="line-number">  64 </a>                   false, off, no, 0
<a name="L65" class="line-number">  65 </a>    
<a name="L66" class="line-number">  66 </a>                 Any other value raises an error.
<a name="L67" class="line-number">  67 </a>    
<a name="L68" class="line-number">  68 </a>    * 'ip_addr': matches an Internet Protocol address, v.4, represented
<a name="L69" class="line-number">  69 </a>                 by a dotted-quad string, i.e. '1.2.3.4'.
<a name="L70" class="line-number">  70 </a>    
<a name="L71" class="line-number">  71 </a>    * 'string': matches any string.
<a name="L72" class="line-number">  72 </a>                Takes optional keyword args 'min' and 'max'
<a name="L73" class="line-number">  73 </a>                to specify min and max lengths of the string.
<a name="L74" class="line-number">  74 </a>    
<a name="L75" class="line-number">  75 </a>    * 'list': matches any list.
<a name="L76" class="line-number">  76 </a>              Takes optional keyword args 'min', and 'max' to specify min and
<a name="L77" class="line-number">  77 </a>              max sizes of the list.
<a name="L78" class="line-number">  78 </a>    
<a name="L79" class="line-number">  79 </a>    * 'int_list': Matches a list of integers.
<a name="L80" class="line-number">  80 </a>                  Takes the same arguments as list.
<a name="L81" class="line-number">  81 </a>    
<a name="L82" class="line-number">  82 </a>    * 'float_list': Matches a list of floats.
<a name="L83" class="line-number">  83 </a>                    Takes the same arguments as list.
<a name="L84" class="line-number">  84 </a>    
<a name="L85" class="line-number">  85 </a>    * 'bool_list': Matches a list of boolean values.
<a name="L86" class="line-number">  86 </a>                   Takes the same arguments as list.
<a name="L87" class="line-number">  87 </a>    
<a name="L88" class="line-number">  88 </a>    * 'ip_addr_list': Matches a list of IP addresses.
<a name="L89" class="line-number">  89 </a>                     Takes the same arguments as list.
<a name="L90" class="line-number">  90 </a>    
<a name="L91" class="line-number">  91 </a>    * 'string_list': Matches a list of strings.
<a name="L92" class="line-number">  92 </a>                     Takes the same arguments as list.
<a name="L93" class="line-number">  93 </a>    
<a name="L94" class="line-number">  94 </a>    * 'mixed_list': Matches a list with different types in 
<a name="L95" class="line-number">  95 </a>                    specific positions. List size must match
<a name="L96" class="line-number">  96 </a>                    the number of arguments.
<a name="L97" class="line-number">  97 </a>    
<a name="L98" class="line-number">  98 </a>                    Each position can be one of :
<a name="L99" class="line-number">  99 </a>                    'integer', 'float', 'ip_addr', 'string', 'boolean'
<a name="L100" class="line-number"> 100 </a>    
<a name="L101" class="line-number"> 101 </a>                    So to specify a list with two strings followed
<a name="L102" class="line-number"> 102 </a>                    by two integers, you write the check as : ::
<a name="L103" class="line-number"> 103 </a>    
<a name="L104" class="line-number"> 104 </a>                      mixed_list('string', 'string', 'integer', 'integer')
<a name="L105" class="line-number"> 105 </a>    
<a name="L106" class="line-number"> 106 </a>    * 'pass': This check matches everything ! It never fails
<a name="L107" class="line-number"> 107 </a>              and the value is unchanged.
<a name="L108" class="line-number"> 108 </a>    
<a name="L109" class="line-number"> 109 </a>              It is also the default if no check is specified.
<a name="L110" class="line-number"> 110 </a>    
<a name="L111" class="line-number"> 111 </a>    * 'option': This check matches any from a list of options.
<a name="L112" class="line-number"> 112 </a>                You specify this check with : ::
<a name="L113" class="line-number"> 113 </a>    
<a name="L114" class="line-number"> 114 </a>                  option('option 1', 'option 2', 'option 3')
<a name="L115" class="line-number"> 115 </a>    
<a name="L116" class="line-number"> 116 </a>    You can supply a default value (returned if no value is supplied)
<a name="L117" class="line-number"> 117 </a>    using the default keyword argument.
<a name="L118" class="line-number"> 118 </a>    
<a name="L119" class="line-number"> 119 </a>    You specify a list argument for default using a list constructor syntax in
<a name="L120" class="line-number"> 120 </a>    the check : ::
<a name="L121" class="line-number"> 121 </a>    
<a name="L122" class="line-number"> 122 </a>        checkname(arg1, arg2, default=list('val 1', 'val 2', 'val 3'))
<a name="L123" class="line-number"> 123 </a>    
<a name="L124" class="line-number"> 124 </a>    A badly formatted set of arguments will raise a ``VdtParamError``.
<a name="L125" class="line-number"> 125 </a>"""</span>
<a name="L126" class="line-number"> 126 </a>
<a name="L127" class="line-number"> 127 </a><span class="python-name">__docformat__</span> <span class="python-operator">=</span> <span class="python-string">"restructuredtext en"</span>
<a name="L128" class="line-number"> 128 </a>
<a name="L129" class="line-number"> 129 </a><span class="python-name">__version__</span> <span class="python-operator">=</span> <span class="python-string">'0.2.3'</span>
<a name="L130" class="line-number"> 130 </a>
<a name="L131" class="line-number"> 131 </a><span class="python-name">__revision__</span> <span class="python-operator">=</span> <span class="python-string">'$Id: validate.py 123 2005-09-08 08:54:28Z fuzzyman $'</span>
<a name="L132" class="line-number"> 132 </a>
<a name="L133" class="line-number"> 133 </a><span class="python-name">__all__</span> <span class="python-operator">=</span> <span class="python-operator">(</span>
<a name="L134" class="line-number"> 134 </a>    <span class="python-string">'__version__'</span><span class="python-operator">,</span>
<a name="L135" class="line-number"> 135 </a>    <span class="python-string">'dottedQuadToNum'</span><span class="python-operator">,</span>
<a name="L136" class="line-number"> 136 </a>    <span class="python-string">'numToDottedQuad'</span><span class="python-operator">,</span>
<a name="L137" class="line-number"> 137 </a>    <span class="python-string">'ValidateError'</span><span class="python-operator">,</span>
<a name="L138" class="line-number"> 138 </a>    <span class="python-string">'VdtUnknownCheckError'</span><span class="python-operator">,</span>
<a name="L139" class="line-number"> 139 </a>    <span class="python-string">'VdtParamError'</span><span class="python-operator">,</span>
<a name="L140" class="line-number"> 140 </a>    <span class="python-string">'VdtTypeError'</span><span class="python-operator">,</span>
<a name="L141" class="line-number"> 141 </a>    <span class="python-string">'VdtValueError'</span><span class="python-operator">,</span>
<a name="L142" class="line-number"> 142 </a>    <span class="python-string">'VdtValueTooSmallError'</span><span class="python-operator">,</span>
<a name="L143" class="line-number"> 143 </a>    <span class="python-string">'VdtValueTooBigError'</span><span class="python-operator">,</span>
<a name="L144" class="line-number"> 144 </a>    <span class="python-string">'VdtValueTooShortError'</span><span class="python-operator">,</span>
<a name="L145" class="line-number"> 145 </a>    <span class="python-string">'VdtValueTooLongError'</span><span class="python-operator">,</span>
<a name="L146" class="line-number"> 146 </a>    <span class="python-string">'VdtMissingValue'</span><span class="python-operator">,</span>
<a name="L147" class="line-number"> 147 </a>    <span class="python-string">'Validator'</span><span class="python-operator">,</span>
<a name="L148" class="line-number"> 148 </a>    <span class="python-string">'is_integer'</span><span class="python-operator">,</span>
<a name="L149" class="line-number"> 149 </a>    <span class="python-string">'is_float'</span><span class="python-operator">,</span>
<a name="L150" class="line-number"> 150 </a>    <span class="python-string">'is_boolean'</span><span class="python-operator">,</span>
<a name="L151" class="line-number"> 151 </a>    <span class="python-string">'is_list'</span><span class="python-operator">,</span>
<a name="L152" class="line-number"> 152 </a>    <span class="python-string">'is_ip_addr'</span><span class="python-operator">,</span>
<a name="L153" class="line-number"> 153 </a>    <span class="python-string">'is_string'</span><span class="python-operator">,</span>
<a name="L154" class="line-number"> 154 </a>    <span class="python-string">'is_int_list'</span><span class="python-operator">,</span>
<a name="L155" class="line-number"> 155 </a>    <span class="python-string">'is_bool_list'</span><span class="python-operator">,</span>
<a name="L156" class="line-number"> 156 </a>    <span class="python-string">'is_float_list'</span><span class="python-operator">,</span>
<a name="L157" class="line-number"> 157 </a>    <span class="python-string">'is_string_list'</span><span class="python-operator">,</span>
<a name="L158" class="line-number"> 158 </a>    <span class="python-string">'is_ip_addr_list'</span><span class="python-operator">,</span>
<a name="L159" class="line-number"> 159 </a>    <span class="python-string">'is_mixed_list'</span><span class="python-operator">,</span>
<a name="L160" class="line-number"> 160 </a>    <span class="python-string">'is_option'</span><span class="python-operator">,</span>
<a name="L161" class="line-number"> 161 </a>    <span class="python-string">'__docformat__'</span><span class="python-operator">,</span>
<a name="L162" class="line-number"> 162 </a><span class="python-operator">)</span>
<a name="L163" class="line-number"> 163 </a>
<a name="L164" class="line-number"> 164 </a><span class="python-keyword">import</span> <span class="python-name">sys</span>
<a name="L165" class="line-number"> 165 </a><span class="python-name">INTP_VER</span> <span class="python-operator">=</span> <span class="python-name">sys</span><span class="python-operator">.</span><span class="python-name">version_info</span><span class="python-operator">[</span><span class="python-operator">:</span><span class="python-number">2</span><span class="python-operator">]</span>
<a name="L166" class="line-number"> 166 </a><span class="python-keyword">if</span> <span class="python-name">INTP_VER</span> <span class="python-operator">&lt;</span> <span class="python-operator">(</span><span class="python-number">2</span><span class="python-operator">,</span> <span class="python-number">2</span><span class="python-operator">)</span><span class="python-operator">:</span>
<a name="L167" class="line-number"> 167 </a>    <span class="python-keyword">raise</span> <span class="python-name">RuntimeError</span><span class="python-operator">(</span><span class="python-string">"Python v.2.2 or later needed"</span><span class="python-operator">)</span>
<a name="L168" class="line-number"> 168 </a>
<a name="L169" class="line-number"> 169 </a><span class="python-keyword">import</span> <span class="python-name">re</span>
<a name="L170" class="line-number"> 170 </a><span class="python-name">StringTypes</span> <span class="python-operator">=</span> <span class="python-operator">(</span><span class="python-name">str</span><span class="python-operator">,</span> <span class="python-name">unicode</span><span class="python-operator">)</span>
<a name="L171" class="line-number"> 171 </a>
<a name="L172" class="line-number"> 172 </a>
<a name="L173" class="line-number"> 173 </a><span class="python-name">_list_arg</span> <span class="python-operator">=</span> <span class="python-name">re</span><span class="python-operator">.</span><span class="python-name">compile</span><span class="python-operator">(</span><span class="python-string">r'''
<a name="L174" class="line-number"> 174 </a>    (?:
<a name="L175" class="line-number"> 175 </a>        ([a-zA-Z_][a-zA-Z0-9_]*)\s*=\s*list\(
<a name="L176" class="line-number"> 176 </a>            (
<a name="L177" class="line-number"> 177 </a>                (?:
<a name="L178" class="line-number"> 178 </a>                    \s*
<a name="L179" class="line-number"> 179 </a>                    (?:
<a name="L180" class="line-number"> 180 </a>                        (?:".*?")|              # double quotes
<a name="L181" class="line-number"> 181 </a>                        (?:'.*?')|              # single quotes
<a name="L182" class="line-number"> 182 </a>                        (?:[^'",\s\)][^,\)]*?)  # unquoted
<a name="L183" class="line-number"> 183 </a>                    )
<a name="L184" class="line-number"> 184 </a>                    \s*,\s*
<a name="L185" class="line-number"> 185 </a>                )*
<a name="L186" class="line-number"> 186 </a>                (?:
<a name="L187" class="line-number"> 187 </a>                    (?:".*?")|              # double quotes
<a name="L188" class="line-number"> 188 </a>                    (?:'.*?')|              # single quotes
<a name="L189" class="line-number"> 189 </a>                    (?:[^'",\s\)][^,\)]*?)  # unquoted
<a name="L190" class="line-number"> 190 </a>                )?                          # last one
<a name="L191" class="line-number"> 191 </a>            )
<a name="L192" class="line-number"> 192 </a>        \)
<a name="L193" class="line-number"> 193 </a>    )
<a name="L194" class="line-number"> 194 </a>'''</span><span class="python-operator">,</span> <span class="python-name">re</span><span class="python-operator">.</span><span class="python-name">VERBOSE</span><span class="python-operator">)</span>    <span class="python-comment"># two groups</span>
<a name="L195" class="line-number"> 195 </a>
<a name="L196" class="line-number"> 196 </a><span class="python-name">_list_members</span> <span class="python-operator">=</span> <span class="python-name">re</span><span class="python-operator">.</span><span class="python-name">compile</span><span class="python-operator">(</span><span class="python-string">r'''
<a name="L197" class="line-number"> 197 </a>    (
<a name="L198" class="line-number"> 198 </a>        (?:".*?")|              # double quotes
<a name="L199" class="line-number"> 199 </a>        (?:'.*?')|              # single quotes
<a name="L200" class="line-number"> 200 </a>        (?:[^'",\s=][^,=]*?)       # unquoted
<a name="L201" class="line-number"> 201 </a>    )
<a name="L202" class="line-number"> 202 </a>    (?:
<a name="L203" class="line-number"> 203 </a>    (?:\s*,\s*)|(?:\s*$)            # comma
<a name="L204" class="line-number"> 204 </a>    )
<a name="L205" class="line-number"> 205 </a>'''</span><span class="python-operator">,</span> <span class="python-name">re</span><span class="python-operator">.</span><span class="python-name">VERBOSE</span><span class="python-operator">)</span>    <span class="python-comment"># one group</span>
<a name="L206" class="line-number"> 206 </a>
<a name="L207" class="line-number"> 207 </a><span class="python-name">_paramstring</span> <span class="python-operator">=</span> <span class="python-string">r'''
<a name="L208" class="line-number"> 208 </a>    (?:
<a name="L209" class="line-number"> 209 </a>        (
<a name="L210" class="line-number"> 210 </a>            (?:
<a name="L211" class="line-number"> 211 </a>                [a-zA-Z_][a-zA-Z0-9_]*\s*=\s*list\(
<a name="L212" class="line-number"> 212 </a>                    (?:
<a name="L213" class="line-number"> 213 </a>                        \s*
<a name="L214" class="line-number"> 214 </a>                        (?:
<a name="L215" class="line-number"> 215 </a>                            (?:".*?")|              # double quotes
<a name="L216" class="line-number"> 216 </a>                            (?:'.*?')|              # single quotes
<a name="L217" class="line-number"> 217 </a>                            (?:[^'",\s\)][^,\)]*?)       # unquoted
<a name="L218" class="line-number"> 218 </a>                        )
<a name="L219" class="line-number"> 219 </a>                        \s*,\s*
<a name="L220" class="line-number"> 220 </a>                    )*
<a name="L221" class="line-number"> 221 </a>                    (?:
<a name="L222" class="line-number"> 222 </a>                        (?:".*?")|              # double quotes
<a name="L223" class="line-number"> 223 </a>                        (?:'.*?')|              # single quotes
<a name="L224" class="line-number"> 224 </a>                        (?:[^'",\s\)][^,\)]*?)       # unquoted
<a name="L225" class="line-number"> 225 </a>                    )?                              # last one
<a name="L226" class="line-number"> 226 </a>                \)
<a name="L227" class="line-number"> 227 </a>            )|
<a name="L228" class="line-number"> 228 </a>            (?:
<a name="L229" class="line-number"> 229 </a>                (?:".*?")|              # double quotes
<a name="L230" class="line-number"> 230 </a>                (?:'.*?')|              # single quotes
<a name="L231" class="line-number"> 231 </a>                (?:[^'",\s=][^,=]*?)|       # unquoted
<a name="L232" class="line-number"> 232 </a>                (?:                         # keyword argument
<a name="L233" class="line-number"> 233 </a>                    [a-zA-Z_][a-zA-Z0-9_]*\s*=\s*
<a name="L234" class="line-number"> 234 </a>                    (?:
<a name="L235" class="line-number"> 235 </a>                        (?:".*?")|              # double quotes
<a name="L236" class="line-number"> 236 </a>                        (?:'.*?')|              # single quotes
<a name="L237" class="line-number"> 237 </a>                        (?:[^'",\s=][^,=]*?)       # unquoted
<a name="L238" class="line-number"> 238 </a>                    )
<a name="L239" class="line-number"> 239 </a>                )
<a name="L240" class="line-number"> 240 </a>            )
<a name="L241" class="line-number"> 241 </a>        )
<a name="L242" class="line-number"> 242 </a>        (?:
<a name="L243" class="line-number"> 243 </a>            (?:\s*,\s*)|(?:\s*$)            # comma
<a name="L244" class="line-number"> 244 </a>        )
<a name="L245" class="line-number"> 245 </a>    )
<a name="L246" class="line-number"> 246 </a>    '''</span>
<a name="L247" class="line-number"> 247 </a>
<a name="L248" class="line-number"> 248 </a><span class="python-name">_matchstring</span> <span class="python-operator">=</span> <span class="python-string">'^%s*'</span> <span class="python-operator">%</span> <span class="python-name">_paramstring</span>
<a name="L249" class="line-number"> 249 </a>
<a name="L250" class="line-number"> 250 </a><span class="python-comment"># Python pre 2.2.1 doesn't have bool</span>
<a name="L251" class="line-number"> 251 </a><span class="python-keyword">try</span><span class="python-operator">:</span>
<a name="L252" class="line-number"> 252 </a>    <span class="python-name">bool</span>
<a name="L253" class="line-number"> 253 </a><span class="python-keyword">except</span> <span class="python-name">NameError</span><span class="python-operator">:</span>
<a name="L254" class="line-number"> 254 </a>    <span class="python-keyword">def</span> <span class="python-name">bool</span><span class="python-operator">(</span><span class="python-name">val</span><span class="python-operator">)</span><span class="python-operator">:</span>
<a name="L255" class="line-number"> 255 </a>        <span class="python-string">"""Simple boolean equivalent function. """</span>
<a name="L256" class="line-number"> 256 </a>        <span class="python-keyword">if</span> <span class="python-name">val</span><span class="python-operator">:</span>
<a name="L257" class="line-number"> 257 </a>            <span class="python-keyword">return</span> <span class="python-number">1</span>
<a name="L258" class="line-number"> 258 </a>        <span class="python-keyword">else</span><span class="python-operator">:</span>
<a name="L259" class="line-number"> 259 </a>            <span class="python-keyword">return</span> <span class="python-number">0</span>
<a name="L260" class="line-number"> 260 </a>
<a name="L261" class="line-number"> 261 </a><span class="python-keyword">def</span> <span class="python-name">dottedQuadToNum</span><span class="python-operator">(</span><span class="python-name">ip</span><span class="python-operator">)</span><span class="python-operator">:</span>
<a name="L262" class="line-number"> 262 </a>    <span class="python-string">"""
<a name="L263" class="line-number"> 263 </a>    Convert decimal dotted quad string to long integer
<a name="L264" class="line-number"> 264 </a>    
<a name="L265" class="line-number"> 265 </a>    &gt;&gt;&gt; dottedQuadToNum('1 ')
<a name="L266" class="line-number"> 266 </a>    1L
<a name="L267" class="line-number"> 267 </a>    &gt;&gt;&gt; dottedQuadToNum(' 1.2')
<a name="L268" class="line-number"> 268 </a>    16777218L
<a name="L269" class="line-number"> 269 </a>    &gt;&gt;&gt; dottedQuadToNum(' 1.2.3 ')
<a name="L270" class="line-number"> 270 </a>    16908291L
<a name="L271" class="line-number"> 271 </a>    &gt;&gt;&gt; dottedQuadToNum('1.2.3.4')
<a name="L272" class="line-number"> 272 </a>    16909060L
<a name="L273" class="line-number"> 273 </a>    &gt;&gt;&gt; dottedQuadToNum('1.2.3. 4')
<a name="L274" class="line-number"> 274 </a>    Traceback (most recent call last):
<a name="L275" class="line-number"> 275 </a>    ValueError: Not a good dotted-quad IP: 1.2.3. 4
<a name="L276" class="line-number"> 276 </a>    &gt;&gt;&gt; dottedQuadToNum('255.255.255.255')
<a name="L277" class="line-number"> 277 </a>    4294967295L
<a name="L278" class="line-number"> 278 </a>    &gt;&gt;&gt; dottedQuadToNum('255.255.255.256')
<a name="L279" class="line-number"> 279 </a>    Traceback (most recent call last):
<a name="L280" class="line-number"> 280 </a>    ValueError: Not a good dotted-quad IP: 255.255.255.256
<a name="L281" class="line-number"> 281 </a>    """</span>
<a name="L282" class="line-number"> 282 </a>
<a name="L283" class="line-number"> 283 </a>    <span class="python-comment"># import here to avoid it when ip_addr values are not used</span>
<a name="L284" class="line-number"> 284 </a>    <span class="python-keyword">import</span> <span class="python-name">socket</span><span class="python-operator">,</span> <span class="python-name">struct</span>
<a name="L285" class="line-number"> 285 </a>
<a name="L286" class="line-number"> 286 </a>    <span class="python-keyword">try</span><span class="python-operator">:</span>
<a name="L287" class="line-number"> 287 </a>        <span class="python-keyword">return</span> <span class="python-name">struct</span><span class="python-operator">.</span><span class="python-name">unpack</span><span class="python-operator">(</span><span class="python-string">'!L'</span><span class="python-operator">,</span>
<a name="L288" class="line-number"> 288 </a>            <span class="python-name">socket</span><span class="python-operator">.</span><span class="python-name">inet_aton</span><span class="python-operator">(</span><span class="python-name">ip</span><span class="python-operator">.</span><span class="python-name">strip</span><span class="python-operator">(</span><span class="python-operator">)</span><span class="python-operator">)</span><span class="python-operator">)</span><span class="python-operator">[</span><span class="python-number">0</span><span class="python-operator">]</span>
<a name="L289" class="line-number"> 289 </a>    <span class="python-keyword">except</span> <span class="python-name">socket</span><span class="python-operator">.</span><span class="python-name">error</span><span class="python-operator">:</span>
<a name="L290" class="line-number"> 290 </a>        <span class="python-comment"># bug in inet_aton, corrected in Python 2.3</span>
<a name="L291" class="line-number"> 291 </a>        <span class="python-keyword">if</span> <span class="python-name">ip</span><span class="python-operator">.</span><span class="python-name">strip</span><span class="python-operator">(</span><span class="python-operator">)</span> <span class="python-operator">==</span> <span class="python-string">'255.255.255.255'</span><span class="python-operator">:</span>
<a name="L292" class="line-number"> 292 </a>            <span class="python-keyword">return</span> <span class="python-number">0xFFFFFFFFL</span>
<a name="L293" class="line-number"> 293 </a>        <span class="python-keyword">else</span><span class="python-operator">:</span>
<a name="L294" class="line-number"> 294 </a>            <span class="python-keyword">raise</span> <span class="python-name">ValueError</span><span class="python-operator">(</span><span class="python-string">'Not a good dotted-quad IP: %s'</span> <span class="python-operator">%</span> <span class="python-name">ip</span><span class="python-operator">)</span>
<a name="L295" class="line-number"> 295 </a>    <span class="python-keyword">return</span>
<a name="L296" class="line-number"> 296 </a>
<a name="L297" class="line-number"> 297 </a><span class="python-keyword">def</span> <span class="python-name">numToDottedQuad</span><span class="python-operator">(</span><span class="python-name">num</span><span class="python-operator">)</span><span class="python-operator">:</span>
<a name="L298" class="line-number"> 298 </a>    <span class="python-string">"""
<a name="L299" class="line-number"> 299 </a>    Convert long int to dotted quad string
<a name="L300" class="line-number"> 300 </a>    
<a name="L301" class="line-number"> 301 </a>    &gt;&gt;&gt; numToDottedQuad(-1L)
<a name="L302" class="line-number"> 302 </a>    Traceback (most recent call last):
<a name="L303" class="line-number"> 303 </a>    ValueError: Not a good numeric IP: -1
<a name="L304" class="line-number"> 304 </a>    &gt;&gt;&gt; numToDottedQuad(1L)
<a name="L305" class="line-number"> 305 </a>    '0.0.0.1'
<a name="L306" class="line-number"> 306 </a>    &gt;&gt;&gt; numToDottedQuad(16777218L)
<a name="L307" class="line-number"> 307 </a>    '1.0.0.2'
<a name="L308" class="line-number"> 308 </a>    &gt;&gt;&gt; numToDottedQuad(16908291L)
<a name="L309" class="line-number"> 309 </a>    '1.2.0.3'
<a name="L310" class="line-number"> 310 </a>    &gt;&gt;&gt; numToDottedQuad(16909060L)
<a name="L311" class="line-number"> 311 </a>    '1.2.3.4'
<a name="L312" class="line-number"> 312 </a>    &gt;&gt;&gt; numToDottedQuad(4294967295L)
<a name="L313" class="line-number"> 313 </a>    '255.255.255.255'
<a name="L314" class="line-number"> 314 </a>    &gt;&gt;&gt; numToDottedQuad(4294967296L)
<a name="L315" class="line-number"> 315 </a>    Traceback (most recent call last):
<a name="L316" class="line-number"> 316 </a>    ValueError: Not a good numeric IP: 4294967296
<a name="L317" class="line-number"> 317 </a>    """</span>
<a name="L318" class="line-number"> 318 </a>
<a name="L319" class="line-number"> 319 </a>    <span class="python-comment"># import here to avoid it when ip_addr values are not used</span>
<a name="L320" class="line-number"> 320 </a>    <span class="python-keyword">import</span> <span class="python-name">socket</span><span class="python-operator">,</span> <span class="python-name">struct</span>
<a name="L321" class="line-number"> 321 </a>
<a name="L322" class="line-number"> 322 </a>    <span class="python-comment"># no need to intercept here, 4294967295L is fine</span>
<a name="L323" class="line-number"> 323 </a>    <span class="python-keyword">try</span><span class="python-operator">:</span>
<a name="L324" class="line-number"> 324 </a>        <span class="python-keyword">return</span> <span class="python-name">socket</span><span class="python-operator">.</span><span class="python-name">inet_ntoa</span><span class="python-operator">(</span>
<a name="L325" class="line-number"> 325 </a>            <span class="python-name">struct</span><span class="python-operator">.</span><span class="python-name">pack</span><span class="python-operator">(</span><span class="python-string">'!L'</span><span class="python-operator">,</span> <span class="python-name">long</span><span class="python-operator">(</span><span class="python-name">num</span><span class="python-operator">)</span><span class="python-operator">)</span><span class="python-operator">)</span>
<a name="L326" class="line-number"> 326 </a>    <span class="python-keyword">except</span> <span class="python-operator">(</span><span class="python-name">socket</span><span class="python-operator">.</span><span class="python-name">error</span><span class="python-operator">,</span> <span class="python-name">struct</span><span class="python-operator">.</span><span class="python-name">error</span><span class="python-operator">,</span> <span class="python-name">OverflowError</span><span class="python-operator">)</span><span class="python-operator">:</span>
<a name="L327" class="line-number"> 327 </a>        <span class="python-keyword">raise</span> <span class="python-name">ValueError</span><span class="python-operator">(</span><span class="python-string">'Not a good numeric IP: %s'</span> <span class="python-operator">%</span> <span class="python-name">num</span><span class="python-operator">)</span>
<a name="L328" class="line-number"> 328 </a>
<a name="L329" class="line-number"> 329 </a><span class="python-keyword">class</span> <span class="python-name">ValidateError</span><span class="python-operator">(</span><span class="python-name">Exception</span><span class="python-operator">)</span><span class="python-operator">:</span>
<a name="L330" class="line-number"> 330 </a>    <span class="python-string">"""
<a name="L331" class="line-number"> 331 </a>    This error indicates that the check failed.
<a name="L332" class="line-number"> 332 </a>    It can be the base class for more specific errors.
<a name="L333" class="line-number"> 333 </a>    
<a name="L334" class="line-number"> 334 </a>    Any check function that fails ought to raise this error.
<a name="L335" class="line-number"> 335 </a>    (or a subclass)
<a name="L336" class="line-number"> 336 </a>    
<a name="L337" class="line-number"> 337 </a>    &gt;&gt;&gt; raise ValidateError
<a name="L338" class="line-number"> 338 </a>    Traceback (most recent call last):
<a name="L339" class="line-number"> 339 </a>    ValidateError
<a name="L340" class="line-number"> 340 </a>    """</span>
<a name="L341" class="line-number"> 341 </a>
<a name="L342" class="line-number"> 342 </a><span class="python-keyword">class</span> <span class="python-name">VdtMissingValue</span><span class="python-operator">(</span><span class="python-name">ValidateError</span><span class="python-operator">)</span><span class="python-operator">:</span>
<a name="L343" class="line-number"> 343 </a>    <span class="python-string">"""No value was supplied to a check that needed one."""</span>
<a name="L344" class="line-number"> 344 </a>
<a name="L345" class="line-number"> 345 </a><span class="python-keyword">class</span> <span class="python-name">VdtUnknownCheckError</span><span class="python-operator">(</span><span class="python-name">ValidateError</span><span class="python-operator">)</span><span class="python-operator">:</span>
<a name="L346" class="line-number"> 346 </a>    <span class="python-string">"""An unknown check function was requested"""</span>
<a name="L347" class="line-number"> 347 </a>
<a name="L348" class="line-number"> 348 </a>    <span class="python-keyword">def</span> <span class="python-name">__init__</span><span class="python-operator">(</span><span class="python-name">self</span><span class="python-operator">,</span> <span class="python-name">value</span><span class="python-operator">)</span><span class="python-operator">:</span>
<a name="L349" class="line-number"> 349 </a>        <span class="python-string">"""
<a name="L350" class="line-number"> 350 </a>        &gt;&gt;&gt; raise VdtUnknownCheckError('yoda')
<a name="L351" class="line-number"> 351 </a>        Traceback (most recent call last):
<a name="L352" class="line-number"> 352 </a>        VdtUnknownCheckError: the check "yoda" is unknown.
<a name="L353" class="line-number"> 353 </a>        """</span>
<a name="L354" class="line-number"> 354 </a>        <span class="python-name">ValidateError</span><span class="python-operator">.</span><span class="python-name">__init__</span><span class="python-operator">(</span>
<a name="L355" class="line-number"> 355 </a>            <span class="python-name">self</span><span class="python-operator">,</span>
<a name="L356" class="line-number"> 356 </a>            <span class="python-string">'the check "%s" is unknown.'</span> <span class="python-operator">%</span> <span class="python-name">value</span><span class="python-operator">)</span>
<a name="L357" class="line-number"> 357 </a>
<a name="L358" class="line-number"> 358 </a><span class="python-keyword">class</span> <span class="python-name">VdtParamError</span><span class="python-operator">(</span><span class="python-name">SyntaxError</span><span class="python-operator">)</span><span class="python-operator">:</span>
<a name="L359" class="line-number"> 359 </a>    <span class="python-string">"""An incorrect parameter was passed"""</span>
<a name="L360" class="line-number"> 360 </a>
<a name="L361" class="line-number"> 361 </a>    <span class="python-keyword">def</span> <span class="python-name">__init__</span><span class="python-operator">(</span><span class="python-name">self</span><span class="python-operator">,</span> <span class="python-name">name</span><span class="python-operator">,</span> <span class="python-name">value</span><span class="python-operator">)</span><span class="python-operator">:</span>
<a name="L362" class="line-number"> 362 </a>        <span class="python-string">"""
<a name="L363" class="line-number"> 363 </a>        &gt;&gt;&gt; raise VdtParamError('yoda', 'jedi')
<a name="L364" class="line-number"> 364 </a>        Traceback (most recent call last):
<a name="L365" class="line-number"> 365 </a>        VdtParamError: passed an incorrect value "jedi" for parameter "yoda".
<a name="L366" class="line-number"> 366 </a>        """</span>
<a name="L367" class="line-number"> 367 </a>        <span class="python-name">SyntaxError</span><span class="python-operator">.</span><span class="python-name">__init__</span><span class="python-operator">(</span>
<a name="L368" class="line-number"> 368 </a>            <span class="python-name">self</span><span class="python-operator">,</span>
<a name="L369" class="line-number"> 369 </a>            <span class="python-string">'passed an incorrect value "%s" for parameter "%s".'</span> <span class="python-operator">%</span> <span class="python-operator">(</span>
<a name="L370" class="line-number"> 370 </a>                <span class="python-name">value</span><span class="python-operator">,</span> <span class="python-name">name</span><span class="python-operator">)</span><span class="python-operator">)</span>
<a name="L371" class="line-number"> 371 </a>
<a name="L372" class="line-number"> 372 </a><span class="python-keyword">class</span> <span class="python-name">VdtTypeError</span><span class="python-operator">(</span><span class="python-name">ValidateError</span><span class="python-operator">)</span><span class="python-operator">:</span>
<a name="L373" class="line-number"> 373 </a>    <span class="python-string">"""The value supplied was of the wrong type"""</span>
<a name="L374" class="line-number"> 374 </a>
<a name="L375" class="line-number"> 375 </a>    <span class="python-keyword">def</span> <span class="python-name">__init__</span><span class="python-operator">(</span><span class="python-name">self</span><span class="python-operator">,</span> <span class="python-name">value</span><span class="python-operator">)</span><span class="python-operator">:</span>
<a name="L376" class="line-number"> 376 </a>        <span class="python-string">"""
<a name="L377" class="line-number"> 377 </a>        &gt;&gt;&gt; raise VdtTypeError('jedi')
<a name="L378" class="line-number"> 378 </a>        Traceback (most recent call last):
<a name="L379" class="line-number"> 379 </a>        VdtTypeError: the value "jedi" is of the wrong type.
<a name="L380" class="line-number"> 380 </a>        """</span>
<a name="L381" class="line-number"> 381 </a>        <span class="python-name">ValidateError</span><span class="python-operator">.</span><span class="python-name">__init__</span><span class="python-operator">(</span>
<a name="L382" class="line-number"> 382 </a>            <span class="python-name">self</span><span class="python-operator">,</span>
<a name="L383" class="line-number"> 383 </a>            <span class="python-string">'the value "%s" is of the wrong type.'</span> <span class="python-operator">%</span> <span class="python-name">value</span><span class="python-operator">)</span>
<a name="L384" class="line-number"> 384 </a>
<a name="L385" class="line-number"> 385 </a><span class="python-keyword">class</span> <span class="python-name">VdtValueError</span><span class="python-operator">(</span><span class="python-name">ValidateError</span><span class="python-operator">)</span><span class="python-operator">:</span>
<a name="L386" class="line-number"> 386 </a>    <span class="python-string">"""
<a name="L387" class="line-number"> 387 </a>    The value supplied was of the correct type, but was not an allowed value.
<a name="L388" class="line-number"> 388 </a>    """</span>
<a name="L389" class="line-number"> 389 </a>
<a name="L390" class="line-number"> 390 </a>    <span class="python-keyword">def</span> <span class="python-name">__init__</span><span class="python-operator">(</span><span class="python-name">self</span><span class="python-operator">,</span> <span class="python-name">value</span><span class="python-operator">)</span><span class="python-operator">:</span>
<a name="L391" class="line-number"> 391 </a>        <span class="python-string">"""
<a name="L392" class="line-number"> 392 </a>        &gt;&gt;&gt; raise VdtValueError('jedi')
<a name="L393" class="line-number"> 393 </a>        Traceback (most recent call last):
<a name="L394" class="line-number"> 394 </a>        VdtValueError: the value "jedi" is unacceptable.
<a name="L395" class="line-number"> 395 </a>        """</span>
<a name="L396" class="line-number"> 396 </a>        <span class="python-name">ValidateError</span><span class="python-operator">.</span><span class="python-name">__init__</span><span class="python-operator">(</span>
<a name="L397" class="line-number"> 397 </a>            <span class="python-name">self</span><span class="python-operator">,</span>
<a name="L398" class="line-number"> 398 </a>            <span class="python-string">'the value "%s" is unacceptable.'</span> <span class="python-operator">%</span> <span class="python-name">value</span><span class="python-operator">)</span>
<a name="L399" class="line-number"> 399 </a>
<a name="L400" class="line-number"> 400 </a><span class="python-keyword">class</span> <span class="python-name">VdtValueTooSmallError</span><span class="python-operator">(</span><span class="python-name">VdtValueError</span><span class="python-operator">)</span><span class="python-operator">:</span>
<a name="L401" class="line-number"> 401 </a>    <span class="python-string">"""The value supplied was of the correct type, but was too small."""</span>
<a name="L402" class="line-number"> 402 </a>
<a name="L403" class="line-number"> 403 </a>    <span class="python-keyword">def</span> <span class="python-name">__init__</span><span class="python-operator">(</span><span class="python-name">self</span><span class="python-operator">,</span> <span class="python-name">value</span><span class="python-operator">)</span><span class="python-operator">:</span>
<a name="L404" class="line-number"> 404 </a>        <span class="python-string">"""
<a name="L405" class="line-number"> 405 </a>        &gt;&gt;&gt; raise VdtValueTooSmallError('0')
<a name="L406" class="line-number"> 406 </a>        Traceback (most recent call last):
<a name="L407" class="line-number"> 407 </a>        VdtValueTooSmallError: the value "0" is too small.
<a name="L408" class="line-number"> 408 </a>        """</span>
<a name="L409" class="line-number"> 409 </a>        <span class="python-name">ValidateError</span><span class="python-operator">.</span><span class="python-name">__init__</span><span class="python-operator">(</span>
<a name="L410" class="line-number"> 410 </a>            <span class="python-name">self</span><span class="python-operator">,</span>
<a name="L411" class="line-number"> 411 </a>            <span class="python-string">'the value "%s" is too small.'</span> <span class="python-operator">%</span> <span class="python-name">value</span><span class="python-operator">)</span>
<a name="L412" class="line-number"> 412 </a>
<a name="L413" class="line-number"> 413 </a><span class="python-keyword">class</span> <span class="python-name">VdtValueTooBigError</span><span class="python-operator">(</span><span class="python-name">VdtValueError</span><span class="python-operator">)</span><span class="python-operator">:</span>
<a name="L414" class="line-number"> 414 </a>    <span class="python-string">"""The value supplied was of the correct type, but was too big."""</span>
<a name="L415" class="line-number"> 415 </a>
<a name="L416" class="line-number"> 416 </a>    <span class="python-keyword">def</span> <span class="python-name">__init__</span><span class="python-operator">(</span><span class="python-name">self</span><span class="python-operator">,</span> <span class="python-name">value</span><span class="python-operator">)</span><span class="python-operator">:</span>
<a name="L417" class="line-number"> 417 </a>        <span class="python-string">"""
<a name="L418" class="line-number"> 418 </a>        &gt;&gt;&gt; raise VdtValueTooBigError('1')
<a name="L419" class="line-number"> 419 </a>        Traceback (most recent call last):
<a name="L420" class="line-number"> 420 </a>        VdtValueTooBigError: the value "1" is too big.
<a name="L421" class="line-number"> 421 </a>        """</span>
<a name="L422" class="line-number"> 422 </a>        <span class="python-name">ValidateError</span><span class="python-operator">.</span><span class="python-name">__init__</span><span class="python-operator">(</span>
<a name="L423" class="line-number"> 423 </a>            <span class="python-name">self</span><span class="python-operator">,</span>
<a name="L424" class="line-number"> 424 </a>            <span class="python-string">'the value "%s" is too big.'</span> <span class="python-operator">%</span> <span class="python-name">value</span><span class="python-operator">)</span>
<a name="L425" class="line-number"> 425 </a>
<a name="L426" class="line-number"> 426 </a><span class="python-keyword">class</span> <span class="python-name">VdtValueTooShortError</span><span class="python-operator">(</span><span class="python-name">VdtValueError</span><span class="python-operator">)</span><span class="python-operator">:</span>
<a name="L427" class="line-number"> 427 </a>    <span class="python-string">"""The value supplied was of the correct type, but was too short."""</span>
<a name="L428" class="line-number"> 428 </a>
<a name="L429" class="line-number"> 429 </a>    <span class="python-keyword">def</span> <span class="python-name">__init__</span><span class="python-operator">(</span><span class="python-name">self</span><span class="python-operator">,</span> <span class="python-name">value</span><span class="python-operator">)</span><span class="python-operator">:</span>
<a name="L430" class="line-number"> 430 </a>        <span class="python-string">"""
<a name="L431" class="line-number"> 431 </a>        &gt;&gt;&gt; raise VdtValueTooShortError('jed')
<a name="L432" class="line-number"> 432 </a>        Traceback (most recent call last):
<a name="L433" class="line-number"> 433 </a>        VdtValueTooShortError: the value "jed" is too short.
<a name="L434" class="line-number"> 434 </a>        """</span>
<a name="L435" class="line-number"> 435 </a>        <span class="python-name">ValidateError</span><span class="python-operator">.</span><span class="python-name">__init__</span><span class="python-operator">(</span>
<a name="L436" class="line-number"> 436 </a>            <span class="python-name">self</span><span class="python-operator">,</span>
<a name="L437" class="line-number"> 437 </a>            <span class="python-string">'the value "%s" is too short.'</span> <span class="python-operator">%</span> <span class="python-operator">(</span><span class="python-name">value</span><span class="python-operator">,</span><span class="python-operator">)</span><span class="python-operator">)</span>
<a name="L438" class="line-number"> 438 </a>
<a name="L439" class="line-number"> 439 </a><span class="python-keyword">class</span> <span class="python-name">VdtValueTooLongError</span><span class="python-operator">(</span><span class="python-name">VdtValueError</span><span class="python-operator">)</span><span class="python-operator">:</span>
<a name="L440" class="line-number"> 440 </a>    <span class="python-string">"""The value supplied was of the correct type, but was too long."""</span>
<a name="L441" class="line-number"> 441 </a>
<a name="L442" class="line-number"> 442 </a>    <span class="python-keyword">def</span> <span class="python-name">__init__</span><span class="python-operator">(</span><span class="python-name">self</span><span class="python-operator">,</span> <span class="python-name">value</span><span class="python-operator">)</span><span class="python-operator">:</span>
<a name="L443" class="line-number"> 443 </a>        <span class="python-string">"""
<a name="L444" class="line-number"> 444 </a>        &gt;&gt;&gt; raise VdtValueTooLongError('jedie')
<a name="L445" class="line-number"> 445 </a>        Traceback (most recent call last):
<a name="L446" class="line-number"> 446 </a>        VdtValueTooLongError: the value "jedie" is too long.
<a name="L447" class="line-number"> 447 </a>        """</span>
<a name="L448" class="line-number"> 448 </a>        <span class="python-name">ValidateError</span><span class="python-operator">.</span><span class="python-name">__init__</span><span class="python-operator">(</span>
<a name="L449" class="line-number"> 449 </a>            <span class="python-name">self</span><span class="python-operator">,</span>
<a name="L450" class="line-number"> 450 </a>            <span class="python-string">'the value "%s" is too long.'</span> <span class="python-operator">%</span>  <span class="python-operator">(</span><span class="python-name">value</span><span class="python-operator">,</span><span class="python-operator">)</span><span class="python-operator">)</span>
<a name="L451" class="line-number"> 451 </a>
<a name="L452" class="line-number"> 452 </a><span class="python-keyword">class</span> <span class="python-name">Validator</span><span class="python-operator">(</span><span class="python-name">object</span><span class="python-operator">)</span><span class="python-operator">:</span>
<a name="L453" class="line-number"> 453 </a>    <span class="python-string">"""
<a name="L454" class="line-number"> 454 </a>        Validator is an object that allows you to register a set of 'checks'.
<a name="L455" class="line-number"> 455 </a>        These checks take input and test that it conforms to the check.
<a name="L456" class="line-number"> 456 </a>        
<a name="L457" class="line-number"> 457 </a>        This can also involve converting the value from a string into
<a name="L458" class="line-number"> 458 </a>        the correct datatype.
<a name="L459" class="line-number"> 459 </a>        
<a name="L460" class="line-number"> 460 </a>        The ``check`` method takes an input string which configures which
<a name="L461" class="line-number"> 461 </a>        check is to be used and applies that check to a supplied value.
<a name="L462" class="line-number"> 462 </a>        
<a name="L463" class="line-number"> 463 </a>        An example input string would be:
<a name="L464" class="line-number"> 464 </a>        'int_range(param1, param2)'
<a name="L465" class="line-number"> 465 </a>        
<a name="L466" class="line-number"> 466 </a>        You would then provide something like:
<a name="L467" class="line-number"> 467 </a>        
<a name="L468" class="line-number"> 468 </a>        &gt;&gt;&gt; def int_range_check(value, min, max):
<a name="L469" class="line-number"> 469 </a>        ...     # turn min and max from strings to integers
<a name="L470" class="line-number"> 470 </a>        ...     min = int(min)
<a name="L471" class="line-number"> 471 </a>        ...     max = int(max)
<a name="L472" class="line-number"> 472 </a>        ...     # check that value is of the correct type.
<a name="L473" class="line-number"> 473 </a>        ...     # possible valid inputs are integers or strings
<a name="L474" class="line-number"> 474 </a>        ...     # that represent integers
<a name="L475" class="line-number"> 475 </a>        ...     if not isinstance(value, (int, long, StringTypes)):
<a name="L476" class="line-number"> 476 </a>        ...         raise VdtTypeError(value)
<a name="L477" class="line-number"> 477 </a>        ...     elif isinstance(value, StringTypes):
<a name="L478" class="line-number"> 478 </a>        ...         # if we are given a string
<a name="L479" class="line-number"> 479 </a>        ...         # attempt to convert to an integer
<a name="L480" class="line-number"> 480 </a>        ...         try:
<a name="L481" class="line-number"> 481 </a>        ...             value = int(value)
<a name="L482" class="line-number"> 482 </a>        ...         except ValueError:
<a name="L483" class="line-number"> 483 </a>        ...             raise VdtValueError(value)
<a name="L484" class="line-number"> 484 </a>        ...     # check the value is between our constraints
<a name="L485" class="line-number"> 485 </a>        ...     if not min &lt;= value:
<a name="L486" class="line-number"> 486 </a>        ...          raise VdtValueTooSmallError(value)
<a name="L487" class="line-number"> 487 </a>        ...     if not value &lt;= max:
<a name="L488" class="line-number"> 488 </a>        ...          raise VdtValueTooBigError(value)
<a name="L489" class="line-number"> 489 </a>        ...     return value
<a name="L490" class="line-number"> 490 </a>        
<a name="L491" class="line-number"> 491 </a>        &gt;&gt;&gt; fdict = {'int_range': int_range_check}
<a name="L492" class="line-number"> 492 </a>        &gt;&gt;&gt; vtr1 = Validator(fdict)
<a name="L493" class="line-number"> 493 </a>        &gt;&gt;&gt; vtr1.check('int_range(20, 40)', '30')
<a name="L494" class="line-number"> 494 </a>        30
<a name="L495" class="line-number"> 495 </a>        &gt;&gt;&gt; vtr1.check('int_range(20, 40)', '60')
<a name="L496" class="line-number"> 496 </a>        Traceback (most recent call last):
<a name="L497" class="line-number"> 497 </a>        VdtValueTooBigError: the value "60" is too big.
<a name="L498" class="line-number"> 498 </a>        
<a name="L499" class="line-number"> 499 </a>        New functions can be added with : ::
<a name="L500" class="line-number"> 500 </a>        
<a name="L501" class="line-number"> 501 </a>        &gt;&gt;&gt; vtr2 = Validator()       
<a name="L502" class="line-number"> 502 </a>        &gt;&gt;&gt; vtr2.functions['int_range'] = int_range_check
<a name="L503" class="line-number"> 503 </a>        
<a name="L504" class="line-number"> 504 </a>        Or by passing in a dictionary of functions when Validator 
<a name="L505" class="line-number"> 505 </a>        is instantiated.
<a name="L506" class="line-number"> 506 </a>        
<a name="L507" class="line-number"> 507 </a>        Your functions *can* use keyword arguments,
<a name="L508" class="line-number"> 508 </a>        but the first argument should always be 'value'.
<a name="L509" class="line-number"> 509 </a>        
<a name="L510" class="line-number"> 510 </a>        If the function doesn't take additional arguments,
<a name="L511" class="line-number"> 511 </a>        the parentheses are optional in the check.
<a name="L512" class="line-number"> 512 </a>        It can be written with either of : ::
<a name="L513" class="line-number"> 513 </a>        
<a name="L514" class="line-number"> 514 </a>            keyword = function_name
<a name="L515" class="line-number"> 515 </a>            keyword = function_name()
<a name="L516" class="line-number"> 516 </a>        
<a name="L517" class="line-number"> 517 </a>        The first program to utilise Validator() was Michael Foord's
<a name="L518" class="line-number"> 518 </a>        ConfigObj, an alternative to ConfigParser which supports lists and
<a name="L519" class="line-number"> 519 </a>        can validate a config file using a config schema.
<a name="L520" class="line-number"> 520 </a>        For more details on using Validator with ConfigObj see:
<a name="L521" class="line-number"> 521 </a>        http://www.voidspace.org.uk/python/configobj.html
<a name="L522" class="line-number"> 522 </a>    """</span>
<a name="L523" class="line-number"> 523 </a>
<a name="L524" class="line-number"> 524 </a>    <span class="python-comment"># this regex does the initial parsing of the checks</span>
<a name="L525" class="line-number"> 525 </a>    <span class="python-name">_func_re</span> <span class="python-operator">=</span> <span class="python-name">re</span><span class="python-operator">.</span><span class="python-name">compile</span><span class="python-operator">(</span><span class="python-string">r'(.+?)\((.*)\)'</span><span class="python-operator">)</span>
<a name="L526" class="line-number"> 526 </a>
<a name="L527" class="line-number"> 527 </a>    <span class="python-comment"># this regex takes apart keyword arguments</span>
<a name="L528" class="line-number"> 528 </a>    <span class="python-name">_key_arg</span> <span class="python-operator">=</span> <span class="python-name">re</span><span class="python-operator">.</span><span class="python-name">compile</span><span class="python-operator">(</span><span class="python-string">r'^([a-zA-Z_][a-zA-Z0-9_]*)\s*=\s*(.*)$'</span><span class="python-operator">)</span>
<a name="L529" class="line-number"> 529 </a>
<a name="L530" class="line-number"> 530 </a>
<a name="L531" class="line-number"> 531 </a>    <span class="python-comment"># this regex finds keyword=list(....) type values</span>
<a name="L532" class="line-number"> 532 </a>    <span class="python-name">_list_arg</span> <span class="python-operator">=</span> <span class="python-name">_list_arg</span>
<a name="L533" class="line-number"> 533 </a>
<a name="L534" class="line-number"> 534 </a>    <span class="python-comment"># this regex takes individual values out of lists - in one pass</span>
<a name="L535" class="line-number"> 535 </a>    <span class="python-name">_list_members</span> <span class="python-operator">=</span> <span class="python-name">_list_members</span>
<a name="L536" class="line-number"> 536 </a>
<a name="L537" class="line-number"> 537 </a>    <span class="python-comment"># These regexes check a set of arguments for validity</span>
<a name="L538" class="line-number"> 538 </a>    <span class="python-comment"># and then pull the members out</span>
<a name="L539" class="line-number"> 539 </a>    <span class="python-name">_paramfinder</span> <span class="python-operator">=</span> <span class="python-name">re</span><span class="python-operator">.</span><span class="python-name">compile</span><span class="python-operator">(</span><span class="python-name">_paramstring</span><span class="python-operator">,</span> <span class="python-name">re</span><span class="python-operator">.</span><span class="python-name">VERBOSE</span><span class="python-operator">)</span>
<a name="L540" class="line-number"> 540 </a>    <span class="python-name">_matchfinder</span> <span class="python-operator">=</span> <span class="python-name">re</span><span class="python-operator">.</span><span class="python-name">compile</span><span class="python-operator">(</span><span class="python-name">_matchstring</span><span class="python-operator">,</span> <span class="python-name">re</span><span class="python-operator">.</span><span class="python-name">VERBOSE</span><span class="python-operator">)</span>
<a name="L541" class="line-number"> 541 </a>
<a name="L542" class="line-number"> 542 </a>
<a name="L543" class="line-number"> 543 </a>    <span class="python-keyword">def</span> <span class="python-name">__init__</span><span class="python-operator">(</span><span class="python-name">self</span><span class="python-operator">,</span> <span class="python-name">functions</span><span class="python-operator">=</span><span class="python-name">None</span><span class="python-operator">)</span><span class="python-operator">:</span>
<a name="L544" class="line-number"> 544 </a>        <span class="python-string">"""
<a name="L545" class="line-number"> 545 </a>        &gt;&gt;&gt; vtri = Validator()
<a name="L546" class="line-number"> 546 </a>        """</span>
<a name="L547" class="line-number"> 547 </a>        <span class="python-name">self</span><span class="python-operator">.</span><span class="python-name">functions</span> <span class="python-operator">=</span> <span class="python-operator">{</span>
<a name="L548" class="line-number"> 548 </a>            <span class="python-string">''</span><span class="python-operator">:</span> <span class="python-name">self</span><span class="python-operator">.</span><span class="python-name">_pass</span><span class="python-operator">,</span>
<a name="L549" class="line-number"> 549 </a>            <span class="python-string">'integer'</span><span class="python-operator">:</span> <span class="python-name">is_integer</span><span class="python-operator">,</span>
<a name="L550" class="line-number"> 550 </a>            <span class="python-string">'float'</span><span class="python-operator">:</span> <span class="python-name">is_float</span><span class="python-operator">,</span>
<a name="L551" class="line-number"> 551 </a>            <span class="python-string">'boolean'</span><span class="python-operator">:</span> <span class="python-name">is_boolean</span><span class="python-operator">,</span>
<a name="L552" class="line-number"> 552 </a>            <span class="python-string">'ip_addr'</span><span class="python-operator">:</span> <span class="python-name">is_ip_addr</span><span class="python-operator">,</span>
<a name="L553" class="line-number"> 553 </a>            <span class="python-string">'string'</span><span class="python-operator">:</span> <span class="python-name">is_string</span><span class="python-operator">,</span>
<a name="L554" class="line-number"> 554 </a>            <span class="python-string">'list'</span><span class="python-operator">:</span> <span class="python-name">is_list</span><span class="python-operator">,</span>
<a name="L555" class="line-number"> 555 </a>            <span class="python-string">'int_list'</span><span class="python-operator">:</span> <span class="python-name">is_int_list</span><span class="python-operator">,</span>
<a name="L556" class="line-number"> 556 </a>            <span class="python-string">'float_list'</span><span class="python-operator">:</span> <span class="python-name">is_float_list</span><span class="python-operator">,</span>
<a name="L557" class="line-number"> 557 </a>            <span class="python-string">'bool_list'</span><span class="python-operator">:</span> <span class="python-name">is_bool_list</span><span class="python-operator">,</span>
<a name="L558" class="line-number"> 558 </a>            <span class="python-string">'ip_addr_list'</span><span class="python-operator">:</span> <span class="python-name">is_ip_addr_list</span><span class="python-operator">,</span>
<a name="L559" class="line-number"> 559 </a>            <span class="python-string">'string_list'</span><span class="python-operator">:</span> <span class="python-name">is_string_list</span><span class="python-operator">,</span>
<a name="L560" class="line-number"> 560 </a>            <span class="python-string">'mixed_list'</span><span class="python-operator">:</span> <span class="python-name">is_mixed_list</span><span class="python-operator">,</span>
<a name="L561" class="line-number"> 561 </a>            <span class="python-string">'pass'</span><span class="python-operator">:</span> <span class="python-name">self</span><span class="python-operator">.</span><span class="python-name">_pass</span><span class="python-operator">,</span>
<a name="L562" class="line-number"> 562 </a>            <span class="python-string">'option'</span><span class="python-operator">:</span> <span class="python-name">is_option</span><span class="python-operator">,</span>
<a name="L563" class="line-number"> 563 </a>        <span class="python-operator">}</span>
<a name="L564" class="line-number"> 564 </a>        <span class="python-keyword">if</span> <span class="python-name">functions</span> <span class="python-keyword">is</span> <span class="python-keyword">not</span> <span class="python-name">None</span><span class="python-operator">:</span>
<a name="L565" class="line-number"> 565 </a>            <span class="python-name">self</span><span class="python-operator">.</span><span class="python-name">functions</span><span class="python-operator">.</span><span class="python-name">update</span><span class="python-operator">(</span><span class="python-name">functions</span><span class="python-operator">)</span>
<a name="L566" class="line-number"> 566 </a>        <span class="python-comment"># tekNico: for use by ConfigObj</span>
<a name="L567" class="line-number"> 567 </a>        <span class="python-name">self</span><span class="python-operator">.</span><span class="python-name">baseErrorClass</span> <span class="python-operator">=</span> <span class="python-name">ValidateError</span>
<a name="L568" class="line-number"> 568 </a>
<a name="L569" class="line-number"> 569 </a>    <span class="python-keyword">def</span> <span class="python-name">check</span><span class="python-operator">(</span><span class="python-name">self</span><span class="python-operator">,</span> <span class="python-name">check</span><span class="python-operator">,</span> <span class="python-name">value</span><span class="python-operator">,</span> <span class="python-name">missing</span><span class="python-operator">=</span><span class="python-name">False</span><span class="python-operator">)</span><span class="python-operator">:</span>
<a name="L570" class="line-number"> 570 </a>        <span class="python-string">"""
<a name="L571" class="line-number"> 571 </a>        Usage: check(check, value)
<a name="L572" class="line-number"> 572 </a>        
<a name="L573" class="line-number"> 573 </a>        Arguments:
<a name="L574" class="line-number"> 574 </a>            check: string representing check to apply (including arguments)
<a name="L575" class="line-number"> 575 </a>            value: object to be checked
<a name="L576" class="line-number"> 576 </a>        Returns value, converted to correct type if necessary
<a name="L577" class="line-number"> 577 </a>        
<a name="L578" class="line-number"> 578 </a>        If the check fails, raises a ``ValidateError`` subclass.
<a name="L579" class="line-number"> 579 </a>        
<a name="L580" class="line-number"> 580 </a>        &gt;&gt;&gt; vtor.check('yoda', '')
<a name="L581" class="line-number"> 581 </a>        Traceback (most recent call last):
<a name="L582" class="line-number"> 582 </a>        VdtUnknownCheckError: the check "yoda" is unknown.
<a name="L583" class="line-number"> 583 </a>        &gt;&gt;&gt; vtor.check('yoda()', '')
<a name="L584" class="line-number"> 584 </a>        Traceback (most recent call last):
<a name="L585" class="line-number"> 585 </a>        VdtUnknownCheckError: the check "yoda" is unknown.
<a name="L586" class="line-number"> 586 </a>        """</span>
<a name="L587" class="line-number"> 587 </a>        <span class="python-name">fun_match</span> <span class="python-operator">=</span> <span class="python-name">self</span><span class="python-operator">.</span><span class="python-name">_func_re</span><span class="python-operator">.</span><span class="python-name">match</span><span class="python-operator">(</span><span class="python-name">check</span><span class="python-operator">)</span>
<a name="L588" class="line-number"> 588 </a>        <span class="python-keyword">if</span> <span class="python-name">fun_match</span><span class="python-operator">:</span>
<a name="L589" class="line-number"> 589 </a>            <span class="python-name">fun_name</span> <span class="python-operator">=</span> <span class="python-name">fun_match</span><span class="python-operator">.</span><span class="python-name">group</span><span class="python-operator">(</span><span class="python-number">1</span><span class="python-operator">)</span>
<a name="L590" class="line-number"> 590 </a>            <span class="python-name">arg_string</span> <span class="python-operator">=</span> <span class="python-name">fun_match</span><span class="python-operator">.</span><span class="python-name">group</span><span class="python-operator">(</span><span class="python-number">2</span><span class="python-operator">)</span>
<a name="L591" class="line-number"> 591 </a>            <span class="python-name">arg_match</span> <span class="python-operator">=</span> <span class="python-name">self</span><span class="python-operator">.</span><span class="python-name">_matchfinder</span><span class="python-operator">.</span><span class="python-name">match</span><span class="python-operator">(</span><span class="python-name">arg_string</span><span class="python-operator">)</span>
<a name="L592" class="line-number"> 592 </a>            <span class="python-keyword">if</span> <span class="python-name">arg_match</span> <span class="python-keyword">is</span> <span class="python-name">None</span><span class="python-operator">:</span>
<a name="L593" class="line-number"> 593 </a>                <span class="python-comment"># Bad syntax</span>
<a name="L594" class="line-number"> 594 </a>                <span class="python-keyword">raise</span> <span class="python-name">VdtParamError</span>
<a name="L595" class="line-number"> 595 </a>            <span class="python-name">fun_args</span> <span class="python-operator">=</span> <span class="python-operator">[</span><span class="python-operator">]</span>
<a name="L596" class="line-number"> 596 </a>            <span class="python-name">fun_kwargs</span> <span class="python-operator">=</span> <span class="python-operator">{</span><span class="python-operator">}</span>
<a name="L597" class="line-number"> 597 </a>            <span class="python-comment"># pull out args of group 2</span>
<a name="L598" class="line-number"> 598 </a>            <span class="python-keyword">for</span> <span class="python-name">arg</span> <span class="python-keyword">in</span> <span class="python-name">self</span><span class="python-operator">.</span><span class="python-name">_paramfinder</span><span class="python-operator">.</span><span class="python-name">findall</span><span class="python-operator">(</span><span class="python-name">arg_string</span><span class="python-operator">)</span><span class="python-operator">:</span>
<a name="L599" class="line-number"> 599 </a>                <span class="python-comment"># args may need whitespace removing (before removing quotes)</span>
<a name="L600" class="line-number"> 600 </a>                <span class="python-name">arg</span> <span class="python-operator">=</span> <span class="python-name">arg</span><span class="python-operator">.</span><span class="python-name">strip</span><span class="python-operator">(</span><span class="python-operator">)</span>
<a name="L601" class="line-number"> 601 </a>                <span class="python-name">listmatch</span> <span class="python-operator">=</span> <span class="python-name">self</span><span class="python-operator">.</span><span class="python-name">_list_arg</span><span class="python-operator">.</span><span class="python-name">match</span><span class="python-operator">(</span><span class="python-name">arg</span><span class="python-operator">)</span>
<a name="L602" class="line-number"> 602 </a>                <span class="python-keyword">if</span> <span class="python-name">listmatch</span><span class="python-operator">:</span>
<a name="L603" class="line-number"> 603 </a>                    <span class="python-name">key</span><span class="python-operator">,</span> <span class="python-name">val</span> <span class="python-operator">=</span> <span class="python-name">self</span><span class="python-operator">.</span><span class="python-name">_list_handle</span><span class="python-operator">(</span><span class="python-name">listmatch</span><span class="python-operator">)</span>
<a name="L604" class="line-number"> 604 </a>                    <span class="python-name">fun_kwargs</span><span class="python-operator">[</span><span class="python-name">key</span><span class="python-operator">]</span> <span class="python-operator">=</span> <span class="python-name">val</span>
<a name="L605" class="line-number"> 605 </a>                    <span class="python-keyword">continue</span>
<a name="L606" class="line-number"> 606 </a>                <span class="python-name">keymatch</span> <span class="python-operator">=</span> <span class="python-name">self</span><span class="python-operator">.</span><span class="python-name">_key_arg</span><span class="python-operator">.</span><span class="python-name">match</span><span class="python-operator">(</span><span class="python-name">arg</span><span class="python-operator">)</span>
<a name="L607" class="line-number"> 607 </a>                <span class="python-keyword">if</span> <span class="python-name">keymatch</span><span class="python-operator">:</span>
<a name="L608" class="line-number"> 608 </a>                    <span class="python-name">val</span> <span class="python-operator">=</span> <span class="python-name">self</span><span class="python-operator">.</span><span class="python-name">_unquote</span><span class="python-operator">(</span><span class="python-name">keymatch</span><span class="python-operator">.</span><span class="python-name">group</span><span class="python-operator">(</span><span class="python-number">2</span><span class="python-operator">)</span><span class="python-operator">)</span>
<a name="L609" class="line-number"> 609 </a>                    <span class="python-name">fun_kwargs</span><span class="python-operator">[</span><span class="python-name">keymatch</span><span class="python-operator">.</span><span class="python-name">group</span><span class="python-operator">(</span><span class="python-number">1</span><span class="python-operator">)</span><span class="python-operator">]</span> <span class="python-operator">=</span> <span class="python-name">val</span>
<a name="L610" class="line-number"> 610 </a>                    <span class="python-keyword">continue</span>
<a name="L611" class="line-number"> 611 </a>                <span class="python-comment">#</span>
<a name="L612" class="line-number"> 612 </a>                <span class="python-name">fun_args</span><span class="python-operator">.</span><span class="python-name">append</span><span class="python-operator">(</span><span class="python-name">self</span><span class="python-operator">.</span><span class="python-name">_unquote</span><span class="python-operator">(</span><span class="python-name">arg</span><span class="python-operator">)</span><span class="python-operator">)</span>
<a name="L613" class="line-number"> 613 </a>        <span class="python-keyword">else</span><span class="python-operator">:</span>
<a name="L614" class="line-number"> 614 </a>            <span class="python-comment"># allows for function names without (args)</span>
<a name="L615" class="line-number"> 615 </a>            <span class="python-operator">(</span><span class="python-name">fun_name</span><span class="python-operator">,</span> <span class="python-name">fun_args</span><span class="python-operator">,</span> <span class="python-name">fun_kwargs</span><span class="python-operator">)</span> <span class="python-operator">=</span> <span class="python-operator">(</span><span class="python-name">check</span><span class="python-operator">,</span> <span class="python-operator">(</span><span class="python-operator">)</span><span class="python-operator">,</span> <span class="python-operator">{</span><span class="python-operator">}</span><span class="python-operator">)</span>
<a name="L616" class="line-number"> 616 </a>        <span class="python-comment">#</span>
<a name="L617" class="line-number"> 617 </a>        <span class="python-keyword">if</span> <span class="python-name">missing</span><span class="python-operator">:</span>
<a name="L618" class="line-number"> 618 </a>            <span class="python-keyword">try</span><span class="python-operator">:</span>
<a name="L619" class="line-number"> 619 </a>                <span class="python-name">value</span> <span class="python-operator">=</span> <span class="python-name">fun_kwargs</span><span class="python-operator">[</span><span class="python-string">'default'</span><span class="python-operator">]</span>
<a name="L620" class="line-number"> 620 </a>            <span class="python-keyword">except</span> <span class="python-name">KeyError</span><span class="python-operator">:</span>
<a name="L621" class="line-number"> 621 </a>                <span class="python-keyword">raise</span> <span class="python-name">VdtMissingValue</span>
<a name="L622" class="line-number"> 622 </a>            <span class="python-keyword">if</span> <span class="python-name">value</span> <span class="python-operator">==</span> <span class="python-string">'None'</span><span class="python-operator">:</span>
<a name="L623" class="line-number"> 623 </a>                <span class="python-name">value</span> <span class="python-operator">=</span> <span class="python-name">None</span>
<a name="L624" class="line-number"> 624 </a>        <span class="python-keyword">if</span> <span class="python-name">value</span> <span class="python-keyword">is</span> <span class="python-name">None</span><span class="python-operator">:</span>
<a name="L625" class="line-number"> 625 </a>            <span class="python-keyword">return</span> <span class="python-name">None</span>
<a name="L626" class="line-number"> 626 </a><span class="python-comment"># tekNico: default must be deleted if the value is specified too,</span>
<a name="L627" class="line-number"> 627 </a><span class="python-comment"># otherwise the check function will get a spurious "default" keyword arg</span>
<a name="L628" class="line-number"> 628 </a>        <span class="python-keyword">try</span><span class="python-operator">:</span>
<a name="L629" class="line-number"> 629 </a>            <span class="python-keyword">del</span> <span class="python-name">fun_kwargs</span><span class="python-operator">[</span><span class="python-string">'default'</span><span class="python-operator">]</span>
<a name="L630" class="line-number"> 630 </a>        <span class="python-keyword">except</span> <span class="python-name">KeyError</span><span class="python-operator">:</span>
<a name="L631" class="line-number"> 631 </a>            <span class="python-keyword">pass</span>
<a name="L632" class="line-number"> 632 </a>        <span class="python-keyword">try</span><span class="python-operator">:</span>
<a name="L633" class="line-number"> 633 </a>            <span class="python-name">fun</span> <span class="python-operator">=</span> <span class="python-name">self</span><span class="python-operator">.</span><span class="python-name">functions</span><span class="python-operator">[</span><span class="python-name">fun_name</span><span class="python-operator">]</span>
<a name="L634" class="line-number"> 634 </a>        <span class="python-keyword">except</span> <span class="python-name">KeyError</span><span class="python-operator">:</span>
<a name="L635" class="line-number"> 635 </a>            <span class="python-keyword">raise</span> <span class="python-name">VdtUnknownCheckError</span><span class="python-operator">(</span><span class="python-name">fun_name</span><span class="python-operator">)</span>
<a name="L636" class="line-number"> 636 </a>        <span class="python-keyword">else</span><span class="python-operator">:</span>
<a name="L637" class="line-number"> 637 </a><span class="python-comment">##            print fun_args</span>
<a name="L638" class="line-number"> 638 </a><span class="python-comment">##            print fun_kwargs</span>
<a name="L639" class="line-number"> 639 </a>            <span class="python-keyword">return</span> <span class="python-name">fun</span><span class="python-operator">(</span><span class="python-name">value</span><span class="python-operator">,</span> <span class="python-operator">*</span><span class="python-name">fun_args</span><span class="python-operator">,</span> <span class="python-operator">**</span><span class="python-name">fun_kwargs</span><span class="python-operator">)</span>
<a name="L640" class="line-number"> 640 </a>
<a name="L641" class="line-number"> 641 </a>    <span class="python-keyword">def</span> <span class="python-name">_unquote</span><span class="python-operator">(</span><span class="python-name">self</span><span class="python-operator">,</span> <span class="python-name">val</span><span class="python-operator">)</span><span class="python-operator">:</span>
<a name="L642" class="line-number"> 642 </a>        <span class="python-string">"""Unquote a value if necessary."""</span>
<a name="L643" class="line-number"> 643 </a>        <span class="python-keyword">if</span> <span class="python-operator">(</span><span class="python-name">len</span><span class="python-operator">(</span><span class="python-name">val</span><span class="python-operator">)</span> <span class="python-operator">&gt;</span> <span class="python-number">2</span><span class="python-operator">)</span> <span class="python-keyword">and</span> <span class="python-operator">(</span><span class="python-name">val</span><span class="python-operator">[</span><span class="python-number">0</span><span class="python-operator">]</span> <span class="python-keyword">in</span> <span class="python-operator">(</span><span class="python-string">"'"</span><span class="python-operator">,</span> <span class="python-string">'"'</span><span class="python-operator">)</span><span class="python-operator">)</span> <span class="python-keyword">and</span> <span class="python-operator">(</span><span class="python-name">val</span><span class="python-operator">[</span><span class="python-number">0</span><span class="python-operator">]</span> <span class="python-operator">==</span> <span class="python-name">val</span><span class="python-operator">[</span><span class="python-operator">-</span><span class="python-number">1</span><span class="python-operator">]</span><span class="python-operator">)</span><span class="python-operator">:</span>
<a name="L644" class="line-number"> 644 </a>            <span class="python-name">val</span> <span class="python-operator">=</span> <span class="python-name">val</span><span class="python-operator">[</span><span class="python-number">1</span><span class="python-operator">:</span><span class="python-operator">-</span><span class="python-number">1</span><span class="python-operator">]</span>
<a name="L645" class="line-number"> 645 </a>        <span class="python-keyword">return</span> <span class="python-name">val</span>
<a name="L646" class="line-number"> 646 </a>
<a name="L647" class="line-number"> 647 </a>    <span class="python-keyword">def</span> <span class="python-name">_list_handle</span><span class="python-operator">(</span><span class="python-name">self</span><span class="python-operator">,</span> <span class="python-name">listmatch</span><span class="python-operator">)</span><span class="python-operator">:</span>
<a name="L648" class="line-number"> 648 </a>        <span class="python-string">"""Take apart a ``keyword=list('val, 'val')`` type string."""</span>
<a name="L649" class="line-number"> 649 </a>        <span class="python-name">out</span> <span class="python-operator">=</span> <span class="python-operator">[</span><span class="python-operator">]</span>
<a name="L650" class="line-number"> 650 </a>        <span class="python-name">name</span> <span class="python-operator">=</span> <span class="python-name">listmatch</span><span class="python-operator">.</span><span class="python-name">group</span><span class="python-operator">(</span><span class="python-number">1</span><span class="python-operator">)</span>
<a name="L651" class="line-number"> 651 </a>        <span class="python-name">args</span> <span class="python-operator">=</span> <span class="python-name">listmatch</span><span class="python-operator">.</span><span class="python-name">group</span><span class="python-operator">(</span><span class="python-number">2</span><span class="python-operator">)</span>
<a name="L652" class="line-number"> 652 </a>        <span class="python-keyword">for</span> <span class="python-name">arg</span> <span class="python-keyword">in</span> <span class="python-name">self</span><span class="python-operator">.</span><span class="python-name">_list_members</span><span class="python-operator">.</span><span class="python-name">findall</span><span class="python-operator">(</span><span class="python-name">args</span><span class="python-operator">)</span><span class="python-operator">:</span>
<a name="L653" class="line-number"> 653 </a>            <span class="python-name">out</span><span class="python-operator">.</span><span class="python-name">append</span><span class="python-operator">(</span><span class="python-name">self</span><span class="python-operator">.</span><span class="python-name">_unquote</span><span class="python-operator">(</span><span class="python-name">arg</span><span class="python-operator">)</span><span class="python-operator">)</span>
<a name="L654" class="line-number"> 654 </a>        <span class="python-keyword">return</span> <span class="python-name">name</span><span class="python-operator">,</span> <span class="python-name">out</span>
<a name="L655" class="line-number"> 655 </a>
<a name="L656" class="line-number"> 656 </a>    <span class="python-keyword">def</span> <span class="python-name">_pass</span><span class="python-operator">(</span><span class="python-name">self</span><span class="python-operator">,</span> <span class="python-name">value</span><span class="python-operator">)</span><span class="python-operator">:</span>
<a name="L657" class="line-number"> 657 </a>        <span class="python-string">"""
<a name="L658" class="line-number"> 658 </a>        Dummy check that always passes
<a name="L659" class="line-number"> 659 </a>        
<a name="L660" class="line-number"> 660 </a>        &gt;&gt;&gt; vtor.check('', 0)
<a name="L661" class="line-number"> 661 </a>        0
<a name="L662" class="line-number"> 662 </a>        &gt;&gt;&gt; vtor.check('', '0')
<a name="L663" class="line-number"> 663 </a>        '0'
<a name="L664" class="line-number"> 664 </a>        """</span>
<a name="L665" class="line-number"> 665 </a>        <span class="python-keyword">return</span> <span class="python-name">value</span>
<a name="L666" class="line-number"> 666 </a>
<a name="L667" class="line-number"> 667 </a>
<a name="L668" class="line-number"> 668 </a><span class="python-keyword">def</span> <span class="python-name">_is_num_param</span><span class="python-operator">(</span><span class="python-name">names</span><span class="python-operator">,</span> <span class="python-name">values</span><span class="python-operator">,</span> <span class="python-name">to_float</span><span class="python-operator">=</span><span class="python-name">False</span><span class="python-operator">)</span><span class="python-operator">:</span>
<a name="L669" class="line-number"> 669 </a>    <span class="python-string">"""
<a name="L670" class="line-number"> 670 </a>    Return numbers from inputs or raise VdtParamError.
<a name="L671" class="line-number"> 671 </a>    
<a name="L672" class="line-number"> 672 </a>    Lets ``None`` pass through.
<a name="L673" class="line-number"> 673 </a>    Pass in keyword argument ``to_float=True`` to
<a name="L674" class="line-number"> 674 </a>    use float for the conversion rather than int.
<a name="L675" class="line-number"> 675 </a>    
<a name="L676" class="line-number"> 676 </a>    &gt;&gt;&gt; _is_num_param(('', ''), (0, 1.0))
<a name="L677" class="line-number"> 677 </a>    [0, 1]
<a name="L678" class="line-number"> 678 </a>    &gt;&gt;&gt; _is_num_param(('', ''), (0, 1.0), to_float=True)
<a name="L679" class="line-number"> 679 </a>    [0.0, 1.0]
<a name="L680" class="line-number"> 680 </a>    &gt;&gt;&gt; _is_num_param(('a'), ('a'))
<a name="L681" class="line-number"> 681 </a>    Traceback (most recent call last):
<a name="L682" class="line-number"> 682 </a>    VdtParamError: passed an incorrect value "a" for parameter "a".
<a name="L683" class="line-number"> 683 </a>    """</span>
<a name="L684" class="line-number"> 684 </a>    <span class="python-name">fun</span> <span class="python-operator">=</span> <span class="python-name">to_float</span> <span class="python-keyword">and</span> <span class="python-name">float</span> <span class="python-keyword">or</span> <span class="python-name">int</span>
<a name="L685" class="line-number"> 685 </a>    <span class="python-name">out_params</span> <span class="python-operator">=</span> <span class="python-operator">[</span><span class="python-operator">]</span>
<a name="L686" class="line-number"> 686 </a>    <span class="python-keyword">for</span> <span class="python-operator">(</span><span class="python-name">name</span><span class="python-operator">,</span> <span class="python-name">val</span><span class="python-operator">)</span> <span class="python-keyword">in</span> <span class="python-name">zip</span><span class="python-operator">(</span><span class="python-name">names</span><span class="python-operator">,</span> <span class="python-name">values</span><span class="python-operator">)</span><span class="python-operator">:</span>
<a name="L687" class="line-number"> 687 </a>        <span class="python-keyword">if</span> <span class="python-name">val</span> <span class="python-keyword">is</span> <span class="python-name">None</span><span class="python-operator">:</span>
<a name="L688" class="line-number"> 688 </a>            <span class="python-name">out_params</span><span class="python-operator">.</span><span class="python-name">append</span><span class="python-operator">(</span><span class="python-name">val</span><span class="python-operator">)</span>
<a name="L689" class="line-number"> 689 </a>        <span class="python-keyword">elif</span> <span class="python-name">isinstance</span><span class="python-operator">(</span><span class="python-name">val</span><span class="python-operator">,</span> <span class="python-operator">(</span><span class="python-name">int</span><span class="python-operator">,</span> <span class="python-name">long</span><span class="python-operator">,</span> <span class="python-name">float</span><span class="python-operator">,</span> <span class="python-name">StringTypes</span><span class="python-operator">)</span><span class="python-operator">)</span><span class="python-operator">:</span>
<a name="L690" class="line-number"> 690 </a>            <span class="python-keyword">try</span><span class="python-operator">:</span>
<a name="L691" class="line-number"> 691 </a>                <span class="python-name">out_params</span><span class="python-operator">.</span><span class="python-name">append</span><span class="python-operator">(</span><span class="python-name">fun</span><span class="python-operator">(</span><span class="python-name">val</span><span class="python-operator">)</span><span class="python-operator">)</span>
<a name="L692" class="line-number"> 692 </a>            <span class="python-keyword">except</span> <span class="python-name">ValueError</span><span class="python-operator">,</span> <span class="python-name">e</span><span class="python-operator">:</span>
<a name="L693" class="line-number"> 693 </a>                <span class="python-keyword">raise</span> <span class="python-name">VdtParamError</span><span class="python-operator">(</span><span class="python-name">name</span><span class="python-operator">,</span> <span class="python-name">val</span><span class="python-operator">)</span>
<a name="L694" class="line-number"> 694 </a>        <span class="python-keyword">else</span><span class="python-operator">:</span>
<a name="L695" class="line-number"> 695 </a>            <span class="python-keyword">raise</span> <span class="python-name">VdtParamError</span><span class="python-operator">(</span><span class="python-name">name</span><span class="python-operator">,</span> <span class="python-name">val</span><span class="python-operator">)</span>
<a name="L696" class="line-number"> 696 </a>    <span class="python-keyword">return</span> <span class="python-name">out_params</span>
<a name="L697" class="line-number"> 697 </a>
<a name="L698" class="line-number"> 698 </a><span class="python-comment"># built in checks</span>
<a name="L699" class="line-number"> 699 </a><span class="python-comment"># you can override these by setting the appropriate name</span>
<a name="L700" class="line-number"> 700 </a><span class="python-comment"># in Validator.functions</span>
<a name="L701" class="line-number"> 701 </a><span class="python-comment"># note: if the params are specified wrongly in your input string,</span>
<a name="L702" class="line-number"> 702 </a><span class="python-comment">#       you will also raise errors.</span>
<a name="L703" class="line-number"> 703 </a>
<a name="L704" class="line-number"> 704 </a><span class="python-keyword">def</span> <span class="python-name">is_integer</span><span class="python-operator">(</span><span class="python-name">value</span><span class="python-operator">,</span> <span class="python-name">min</span><span class="python-operator">=</span><span class="python-name">None</span><span class="python-operator">,</span> <span class="python-name">max</span><span class="python-operator">=</span><span class="python-name">None</span><span class="python-operator">)</span><span class="python-operator">:</span>
<a name="L705" class="line-number"> 705 </a>    <span class="python-string">"""
<a name="L706" class="line-number"> 706 </a>    A check that tests that a given value is an integer (int, or long)
<a name="L707" class="line-number"> 707 </a>    and optionally, between bounds. A negative value is accepted, while
<a name="L708" class="line-number"> 708 </a>    a float will fail.
<a name="L709" class="line-number"> 709 </a>    
<a name="L710" class="line-number"> 710 </a>    If the value is a string, then the conversion is done - if possible.
<a name="L711" class="line-number"> 711 </a>    Otherwise a VdtError is raised.
<a name="L712" class="line-number"> 712 </a>    
<a name="L713" class="line-number"> 713 </a>    &gt;&gt;&gt; vtor.check('integer', '-1')
<a name="L714" class="line-number"> 714 </a>    -1
<a name="L715" class="line-number"> 715 </a>    &gt;&gt;&gt; vtor.check('integer', '0')
<a name="L716" class="line-number"> 716 </a>    0
<a name="L717" class="line-number"> 717 </a>    &gt;&gt;&gt; vtor.check('integer', 9)
<a name="L718" class="line-number"> 718 </a>    9
<a name="L719" class="line-number"> 719 </a>    &gt;&gt;&gt; vtor.check('integer', 'a')
<a name="L720" class="line-number"> 720 </a>    Traceback (most recent call last):
<a name="L721" class="line-number"> 721 </a>    VdtTypeError: the value "a" is of the wrong type.
<a name="L722" class="line-number"> 722 </a>    &gt;&gt;&gt; vtor.check('integer', '2.2')
<a name="L723" class="line-number"> 723 </a>    Traceback (most recent call last):
<a name="L724" class="line-number"> 724 </a>    VdtTypeError: the value "2.2" is of the wrong type.
<a name="L725" class="line-number"> 725 </a>    &gt;&gt;&gt; vtor.check('integer(10)', '20')
<a name="L726" class="line-number"> 726 </a>    20
<a name="L727" class="line-number"> 727 </a>    &gt;&gt;&gt; vtor.check('integer(max=20)', '15')
<a name="L728" class="line-number"> 728 </a>    15
<a name="L729" class="line-number"> 729 </a>    &gt;&gt;&gt; vtor.check('integer(10)', '9')
<a name="L730" class="line-number"> 730 </a>    Traceback (most recent call last):
<a name="L731" class="line-number"> 731 </a>    VdtValueTooSmallError: the value "9" is too small.
<a name="L732" class="line-number"> 732 </a>    &gt;&gt;&gt; vtor.check('integer(10)', 9)
<a name="L733" class="line-number"> 733 </a>    Traceback (most recent call last):
<a name="L734" class="line-number"> 734 </a>    VdtValueTooSmallError: the value "9" is too small.
<a name="L735" class="line-number"> 735 </a>    &gt;&gt;&gt; vtor.check('integer(max=20)', '35')
<a name="L736" class="line-number"> 736 </a>    Traceback (most recent call last):
<a name="L737" class="line-number"> 737 </a>    VdtValueTooBigError: the value "35" is too big.
<a name="L738" class="line-number"> 738 </a>    &gt;&gt;&gt; vtor.check('integer(max=20)', 35)
<a name="L739" class="line-number"> 739 </a>    Traceback (most recent call last):
<a name="L740" class="line-number"> 740 </a>    VdtValueTooBigError: the value "35" is too big.
<a name="L741" class="line-number"> 741 </a>    &gt;&gt;&gt; vtor.check('integer(0, 9)', False)
<a name="L742" class="line-number"> 742 </a>    0
<a name="L743" class="line-number"> 743 </a>    """</span>
<a name="L744" class="line-number"> 744 </a><span class="python-comment">#    print value, type(value)</span>
<a name="L745" class="line-number"> 745 </a>    <span class="python-operator">(</span><span class="python-name">min_val</span><span class="python-operator">,</span> <span class="python-name">max_val</span><span class="python-operator">)</span> <span class="python-operator">=</span> <span class="python-name">_is_num_param</span><span class="python-operator">(</span><span class="python-operator">(</span><span class="python-string">'min'</span><span class="python-operator">,</span> <span class="python-string">'max'</span><span class="python-operator">)</span><span class="python-operator">,</span> <span class="python-operator">(</span><span class="python-name">min</span><span class="python-operator">,</span> <span class="python-name">max</span><span class="python-operator">)</span><span class="python-operator">)</span>
<a name="L746" class="line-number"> 746 </a>    <span class="python-keyword">if</span> <span class="python-keyword">not</span> <span class="python-name">isinstance</span><span class="python-operator">(</span><span class="python-name">value</span><span class="python-operator">,</span> <span class="python-operator">(</span><span class="python-name">int</span><span class="python-operator">,</span> <span class="python-name">long</span><span class="python-operator">,</span> <span class="python-name">StringTypes</span><span class="python-operator">)</span><span class="python-operator">)</span><span class="python-operator">:</span>
<a name="L747" class="line-number"> 747 </a>        <span class="python-keyword">raise</span> <span class="python-name">VdtTypeError</span><span class="python-operator">(</span><span class="python-name">value</span><span class="python-operator">)</span>
<a name="L748" class="line-number"> 748 </a>    <span class="python-keyword">if</span> <span class="python-name">isinstance</span><span class="python-operator">(</span><span class="python-name">value</span><span class="python-operator">,</span> <span class="python-name">StringTypes</span><span class="python-operator">)</span><span class="python-operator">:</span>
<a name="L749" class="line-number"> 749 </a>        <span class="python-comment"># if it's a string - does it represent an integer ?</span>
<a name="L750" class="line-number"> 750 </a>        <span class="python-keyword">try</span><span class="python-operator">:</span>
<a name="L751" class="line-number"> 751 </a>            <span class="python-name">value</span> <span class="python-operator">=</span> <span class="python-name">int</span><span class="python-operator">(</span><span class="python-name">value</span><span class="python-operator">)</span>
<a name="L752" class="line-number"> 752 </a>        <span class="python-keyword">except</span> <span class="python-name">ValueError</span><span class="python-operator">:</span>
<a name="L753" class="line-number"> 753 </a>            <span class="python-keyword">raise</span> <span class="python-name">VdtTypeError</span><span class="python-operator">(</span><span class="python-name">value</span><span class="python-operator">)</span>
<a name="L754" class="line-number"> 754 </a>    <span class="python-keyword">if</span> <span class="python-operator">(</span><span class="python-name">min_val</span> <span class="python-keyword">is</span> <span class="python-keyword">not</span> <span class="python-name">None</span><span class="python-operator">)</span> <span class="python-keyword">and</span> <span class="python-operator">(</span><span class="python-name">value</span> <span class="python-operator">&lt;</span> <span class="python-name">min_val</span><span class="python-operator">)</span><span class="python-operator">:</span>
<a name="L755" class="line-number"> 755 </a>        <span class="python-keyword">raise</span> <span class="python-name">VdtValueTooSmallError</span><span class="python-operator">(</span><span class="python-name">value</span><span class="python-operator">)</span>
<a name="L756" class="line-number"> 756 </a>    <span class="python-keyword">if</span> <span class="python-operator">(</span><span class="python-name">max_val</span> <span class="python-keyword">is</span> <span class="python-keyword">not</span> <span class="python-name">None</span><span class="python-operator">)</span> <span class="python-keyword">and</span> <span class="python-operator">(</span><span class="python-name">value</span> <span class="python-operator">&gt;</span> <span class="python-name">max_val</span><span class="python-operator">)</span><span class="python-operator">:</span>
<a name="L757" class="line-number"> 757 </a>        <span class="python-keyword">raise</span> <span class="python-name">VdtValueTooBigError</span><span class="python-operator">(</span><span class="python-name">value</span><span class="python-operator">)</span>
<a name="L758" class="line-number"> 758 </a>    <span class="python-keyword">return</span> <span class="python-name">value</span>
<a name="L759" class="line-number"> 759 </a>
<a name="L760" class="line-number"> 760 </a><span class="python-keyword">def</span> <span class="python-name">is_float</span><span class="python-operator">(</span><span class="python-name">value</span><span class="python-operator">,</span> <span class="python-name">min</span><span class="python-operator">=</span><span class="python-name">None</span><span class="python-operator">,</span> <span class="python-name">max</span><span class="python-operator">=</span><span class="python-name">None</span><span class="python-operator">)</span><span class="python-operator">:</span>
<a name="L761" class="line-number"> 761 </a>    <span class="python-string">"""
<a name="L762" class="line-number"> 762 </a>    A check that tests that a given value is a float
<a name="L763" class="line-number"> 763 </a>    (an integer will be accepted), and optionally - that it is between bounds.
<a name="L764" class="line-number"> 764 </a>    
<a name="L765" class="line-number"> 765 </a>    If the value is a string, then the conversion is done - if possible.
<a name="L766" class="line-number"> 766 </a>    Otherwise a VdtError is raised.
<a name="L767" class="line-number"> 767 </a>    
<a name="L768" class="line-number"> 768 </a>    This can accept negative values.
<a name="L769" class="line-number"> 769 </a>    
<a name="L770" class="line-number"> 770 </a>    &gt;&gt;&gt; vtor.check('float', '2')
<a name="L771" class="line-number"> 771 </a>    2.0
<a name="L772" class="line-number"> 772 </a>    
<a name="L773" class="line-number"> 773 </a>    From now on we multiply the value to avoid comparing decimals
<a name="L774" class="line-number"> 774 </a>    
<a name="L775" class="line-number"> 775 </a>    &gt;&gt;&gt; vtor.check('float', '-6.8') * 10
<a name="L776" class="line-number"> 776 </a>    -68.0
<a name="L777" class="line-number"> 777 </a>    &gt;&gt;&gt; vtor.check('float', '12.2') * 10
<a name="L778" class="line-number"> 778 </a>    122.0
<a name="L779" class="line-number"> 779 </a>    &gt;&gt;&gt; vtor.check('float', 8.4) * 10
<a name="L780" class="line-number"> 780 </a>    84.0
<a name="L781" class="line-number"> 781 </a>    &gt;&gt;&gt; vtor.check('float', 'a')
<a name="L782" class="line-number"> 782 </a>    Traceback (most recent call last):
<a name="L783" class="line-number"> 783 </a>    VdtTypeError: the value "a" is of the wrong type.
<a name="L784" class="line-number"> 784 </a>    &gt;&gt;&gt; vtor.check('float(10.1)', '10.2') * 10
<a name="L785" class="line-number"> 785 </a>    102.0
<a name="L786" class="line-number"> 786 </a>    &gt;&gt;&gt; vtor.check('float(max=20.2)', '15.1') * 10
<a name="L787" class="line-number"> 787 </a>    151.0
<a name="L788" class="line-number"> 788 </a>    &gt;&gt;&gt; vtor.check('float(10.0)', '9.0')
<a name="L789" class="line-number"> 789 </a>    Traceback (most recent call last):
<a name="L790" class="line-number"> 790 </a>    VdtValueTooSmallError: the value "9.0" is too small.
<a name="L791" class="line-number"> 791 </a>    &gt;&gt;&gt; vtor.check('float(max=20.0)', '35.0')
<a name="L792" class="line-number"> 792 </a>    Traceback (most recent call last):
<a name="L793" class="line-number"> 793 </a>    VdtValueTooBigError: the value "35.0" is too big.
<a name="L794" class="line-number"> 794 </a>    """</span>
<a name="L795" class="line-number"> 795 </a>    <span class="python-operator">(</span><span class="python-name">min_val</span><span class="python-operator">,</span> <span class="python-name">max_val</span><span class="python-operator">)</span> <span class="python-operator">=</span> <span class="python-name">_is_num_param</span><span class="python-operator">(</span>
<a name="L796" class="line-number"> 796 </a>        <span class="python-operator">(</span><span class="python-string">'min'</span><span class="python-operator">,</span> <span class="python-string">'max'</span><span class="python-operator">)</span><span class="python-operator">,</span> <span class="python-operator">(</span><span class="python-name">min</span><span class="python-operator">,</span> <span class="python-name">max</span><span class="python-operator">)</span><span class="python-operator">,</span> <span class="python-name">to_float</span><span class="python-operator">=</span><span class="python-name">True</span><span class="python-operator">)</span>
<a name="L797" class="line-number"> 797 </a>    <span class="python-keyword">if</span> <span class="python-keyword">not</span> <span class="python-name">isinstance</span><span class="python-operator">(</span><span class="python-name">value</span><span class="python-operator">,</span> <span class="python-operator">(</span><span class="python-name">int</span><span class="python-operator">,</span> <span class="python-name">long</span><span class="python-operator">,</span> <span class="python-name">float</span><span class="python-operator">,</span> <span class="python-name">StringTypes</span><span class="python-operator">)</span><span class="python-operator">)</span><span class="python-operator">:</span>
<a name="L798" class="line-number"> 798 </a>        <span class="python-keyword">raise</span> <span class="python-name">VdtTypeError</span><span class="python-operator">(</span><span class="python-name">value</span><span class="python-operator">)</span>
<a name="L799" class="line-number"> 799 </a>    <span class="python-keyword">if</span> <span class="python-keyword">not</span> <span class="python-name">isinstance</span><span class="python-operator">(</span><span class="python-name">value</span><span class="python-operator">,</span> <span class="python-name">float</span><span class="python-operator">)</span><span class="python-operator">:</span>
<a name="L800" class="line-number"> 800 </a>        <span class="python-comment"># if it's a string - does it represent a float ?</span>
<a name="L801" class="line-number"> 801 </a>        <span class="python-keyword">try</span><span class="python-operator">:</span>
<a name="L802" class="line-number"> 802 </a>            <span class="python-name">value</span> <span class="python-operator">=</span> <span class="python-name">float</span><span class="python-operator">(</span><span class="python-name">value</span><span class="python-operator">)</span>
<a name="L803" class="line-number"> 803 </a>        <span class="python-keyword">except</span> <span class="python-name">ValueError</span><span class="python-operator">:</span>
<a name="L804" class="line-number"> 804 </a>            <span class="python-keyword">raise</span> <span class="python-name">VdtTypeError</span><span class="python-operator">(</span><span class="python-name">value</span><span class="python-operator">)</span>
<a name="L805" class="line-number"> 805 </a>    <span class="python-keyword">if</span> <span class="python-operator">(</span><span class="python-name">min_val</span> <span class="python-keyword">is</span> <span class="python-keyword">not</span> <span class="python-name">None</span><span class="python-operator">)</span> <span class="python-keyword">and</span> <span class="python-operator">(</span><span class="python-name">value</span> <span class="python-operator">&lt;</span> <span class="python-name">min_val</span><span class="python-operator">)</span><span class="python-operator">:</span>
<a name="L806" class="line-number"> 806 </a>        <span class="python-keyword">raise</span> <span class="python-name">VdtValueTooSmallError</span><span class="python-operator">(</span><span class="python-name">value</span><span class="python-operator">)</span>
<a name="L807" class="line-number"> 807 </a>    <span class="python-keyword">if</span> <span class="python-operator">(</span><span class="python-name">max_val</span> <span class="python-keyword">is</span> <span class="python-keyword">not</span> <span class="python-name">None</span><span class="python-operator">)</span> <span class="python-keyword">and</span> <span class="python-operator">(</span><span class="python-name">value</span> <span class="python-operator">&gt;</span> <span class="python-name">max_val</span><span class="python-operator">)</span><span class="python-operator">:</span>
<a name="L808" class="line-number"> 808 </a>        <span class="python-keyword">raise</span> <span class="python-name">VdtValueTooBigError</span><span class="python-operator">(</span><span class="python-name">value</span><span class="python-operator">)</span>
<a name="L809" class="line-number"> 809 </a>    <span class="python-keyword">return</span> <span class="python-name">value</span>
<a name="L810" class="line-number"> 810 </a>
<a name="L811" class="line-number"> 811 </a><span class="python-name">bool_dict</span> <span class="python-operator">=</span> <span class="python-operator">{</span>
<a name="L812" class="line-number"> 812 </a>    <span class="python-name">True</span><span class="python-operator">:</span> <span class="python-name">True</span><span class="python-operator">,</span> <span class="python-string">'on'</span><span class="python-operator">:</span> <span class="python-name">True</span><span class="python-operator">,</span> <span class="python-string">'1'</span><span class="python-operator">:</span> <span class="python-name">True</span><span class="python-operator">,</span> <span class="python-string">'true'</span><span class="python-operator">:</span> <span class="python-name">True</span><span class="python-operator">,</span> <span class="python-string">'yes'</span><span class="python-operator">:</span> <span class="python-name">True</span><span class="python-operator">,</span>
<a name="L813" class="line-number"> 813 </a>    <span class="python-name">False</span><span class="python-operator">:</span> <span class="python-name">False</span><span class="python-operator">,</span> <span class="python-string">'off'</span><span class="python-operator">:</span> <span class="python-name">False</span><span class="python-operator">,</span> <span class="python-string">'0'</span><span class="python-operator">:</span> <span class="python-name">False</span><span class="python-operator">,</span> <span class="python-string">'false'</span><span class="python-operator">:</span> <span class="python-name">False</span><span class="python-operator">,</span> <span class="python-string">'no'</span><span class="python-operator">:</span> <span class="python-name">False</span><span class="python-operator">,</span>
<a name="L814" class="line-number"> 814 </a><span class="python-operator">}</span>
<a name="L815" class="line-number"> 815 </a>
<a name="L816" class="line-number"> 816 </a><span class="python-keyword">def</span> <span class="python-name">is_boolean</span><span class="python-operator">(</span><span class="python-name">value</span><span class="python-operator">)</span><span class="python-operator">:</span>
<a name="L817" class="line-number"> 817 </a>    <span class="python-string">"""
<a name="L818" class="line-number"> 818 </a>    Check if the value represents a boolean.
<a name="L819" class="line-number"> 819 </a>    
<a name="L820" class="line-number"> 820 </a>    &gt;&gt;&gt; vtor.check('boolean', 0)
<a name="L821" class="line-number"> 821 </a>    0
<a name="L822" class="line-number"> 822 </a>    &gt;&gt;&gt; vtor.check('boolean', False)
<a name="L823" class="line-number"> 823 </a>    0
<a name="L824" class="line-number"> 824 </a>    &gt;&gt;&gt; vtor.check('boolean', '0')
<a name="L825" class="line-number"> 825 </a>    0
<a name="L826" class="line-number"> 826 </a>    &gt;&gt;&gt; vtor.check('boolean', 'off')
<a name="L827" class="line-number"> 827 </a>    0
<a name="L828" class="line-number"> 828 </a>    &gt;&gt;&gt; vtor.check('boolean', 'false')
<a name="L829" class="line-number"> 829 </a>    0
<a name="L830" class="line-number"> 830 </a>    &gt;&gt;&gt; vtor.check('boolean', 'no')
<a name="L831" class="line-number"> 831 </a>    0
<a name="L832" class="line-number"> 832 </a>    &gt;&gt;&gt; vtor.check('boolean', 'nO')
<a name="L833" class="line-number"> 833 </a>    0
<a name="L834" class="line-number"> 834 </a>    &gt;&gt;&gt; vtor.check('boolean', 'NO')
<a name="L835" class="line-number"> 835 </a>    0
<a name="L836" class="line-number"> 836 </a>    &gt;&gt;&gt; vtor.check('boolean', 1)
<a name="L837" class="line-number"> 837 </a>    1
<a name="L838" class="line-number"> 838 </a>    &gt;&gt;&gt; vtor.check('boolean', True)
<a name="L839" class="line-number"> 839 </a>    1
<a name="L840" class="line-number"> 840 </a>    &gt;&gt;&gt; vtor.check('boolean', '1')
<a name="L841" class="line-number"> 841 </a>    1
<a name="L842" class="line-number"> 842 </a>    &gt;&gt;&gt; vtor.check('boolean', 'on')
<a name="L843" class="line-number"> 843 </a>    1
<a name="L844" class="line-number"> 844 </a>    &gt;&gt;&gt; vtor.check('boolean', 'true')
<a name="L845" class="line-number"> 845 </a>    1
<a name="L846" class="line-number"> 846 </a>    &gt;&gt;&gt; vtor.check('boolean', 'yes')
<a name="L847" class="line-number"> 847 </a>    1
<a name="L848" class="line-number"> 848 </a>    &gt;&gt;&gt; vtor.check('boolean', 'Yes')
<a name="L849" class="line-number"> 849 </a>    1
<a name="L850" class="line-number"> 850 </a>    &gt;&gt;&gt; vtor.check('boolean', 'YES')
<a name="L851" class="line-number"> 851 </a>    1
<a name="L852" class="line-number"> 852 </a>    &gt;&gt;&gt; vtor.check('boolean', '')
<a name="L853" class="line-number"> 853 </a>    Traceback (most recent call last):
<a name="L854" class="line-number"> 854 </a>    VdtTypeError: the value "" is of the wrong type.
<a name="L855" class="line-number"> 855 </a>    &gt;&gt;&gt; vtor.check('boolean', 'up')
<a name="L856" class="line-number"> 856 </a>    Traceback (most recent call last):
<a name="L857" class="line-number"> 857 </a>    VdtTypeError: the value "up" is of the wrong type.
<a name="L858" class="line-number"> 858 </a>    
<a name="L859" class="line-number"> 859 </a>    """</span>
<a name="L860" class="line-number"> 860 </a>    <span class="python-keyword">if</span> <span class="python-name">isinstance</span><span class="python-operator">(</span><span class="python-name">value</span><span class="python-operator">,</span> <span class="python-name">StringTypes</span><span class="python-operator">)</span><span class="python-operator">:</span>
<a name="L861" class="line-number"> 861 </a>        <span class="python-keyword">try</span><span class="python-operator">:</span>
<a name="L862" class="line-number"> 862 </a>            <span class="python-keyword">return</span> <span class="python-name">bool_dict</span><span class="python-operator">[</span><span class="python-name">value</span><span class="python-operator">.</span><span class="python-name">lower</span><span class="python-operator">(</span><span class="python-operator">)</span><span class="python-operator">]</span>
<a name="L863" class="line-number"> 863 </a>        <span class="python-keyword">except</span> <span class="python-name">KeyError</span><span class="python-operator">:</span>
<a name="L864" class="line-number"> 864 </a>            <span class="python-keyword">raise</span> <span class="python-name">VdtTypeError</span><span class="python-operator">(</span><span class="python-name">value</span><span class="python-operator">)</span>
<a name="L865" class="line-number"> 865 </a>    <span class="python-comment"># we do an equality test rather than an identity test</span>
<a name="L866" class="line-number"> 866 </a>    <span class="python-comment"># this ensures Python 2.2 compatibilty</span>
<a name="L867" class="line-number"> 867 </a>    <span class="python-comment"># and allows 0 and 1 to represent True and False</span>
<a name="L868" class="line-number"> 868 </a>    <span class="python-keyword">if</span> <span class="python-name">value</span> <span class="python-operator">==</span> <span class="python-name">False</span><span class="python-operator">:</span>
<a name="L869" class="line-number"> 869 </a>        <span class="python-keyword">return</span> <span class="python-name">False</span>
<a name="L870" class="line-number"> 870 </a>    <span class="python-keyword">elif</span> <span class="python-name">value</span> <span class="python-operator">==</span> <span class="python-name">True</span><span class="python-operator">:</span>
<a name="L871" class="line-number"> 871 </a>        <span class="python-keyword">return</span> <span class="python-name">True</span>
<a name="L872" class="line-number"> 872 </a>    <span class="python-keyword">else</span><span class="python-operator">:</span>
<a name="L873" class="line-number"> 873 </a>        <span class="python-keyword">raise</span> <span class="python-name">VdtTypeError</span><span class="python-operator">(</span><span class="python-name">value</span><span class="python-operator">)</span>
<a name="L874" class="line-number"> 874 </a>
<a name="L875" class="line-number"> 875 </a>
<a name="L876" class="line-number"> 876 </a><span class="python-keyword">def</span> <span class="python-name">is_ip_addr</span><span class="python-operator">(</span><span class="python-name">value</span><span class="python-operator">)</span><span class="python-operator">:</span>
<a name="L877" class="line-number"> 877 </a>    <span class="python-string">"""
<a name="L878" class="line-number"> 878 </a>    Check that the supplied value is an Internet Protocol address, v.4,
<a name="L879" class="line-number"> 879 </a>    represented by a dotted-quad string, i.e. '1.2.3.4'.
<a name="L880" class="line-number"> 880 </a>    
<a name="L881" class="line-number"> 881 </a>    &gt;&gt;&gt; vtor.check('ip_addr', '1 ')
<a name="L882" class="line-number"> 882 </a>    '1'
<a name="L883" class="line-number"> 883 </a>    &gt;&gt;&gt; vtor.check('ip_addr', ' 1.2')
<a name="L884" class="line-number"> 884 </a>    '1.2'
<a name="L885" class="line-number"> 885 </a>    &gt;&gt;&gt; vtor.check('ip_addr', ' 1.2.3 ')
<a name="L886" class="line-number"> 886 </a>    '1.2.3'
<a name="L887" class="line-number"> 887 </a>    &gt;&gt;&gt; vtor.check('ip_addr', '1.2.3.4')
<a name="L888" class="line-number"> 888 </a>    '1.2.3.4'
<a name="L889" class="line-number"> 889 </a>    &gt;&gt;&gt; vtor.check('ip_addr', '0.0.0.0')
<a name="L890" class="line-number"> 890 </a>    '0.0.0.0'
<a name="L891" class="line-number"> 891 </a>    &gt;&gt;&gt; vtor.check('ip_addr', '255.255.255.255')
<a name="L892" class="line-number"> 892 </a>    '255.255.255.255'
<a name="L893" class="line-number"> 893 </a>    &gt;&gt;&gt; vtor.check('ip_addr', '255.255.255.256')
<a name="L894" class="line-number"> 894 </a>    Traceback (most recent call last):
<a name="L895" class="line-number"> 895 </a>    VdtValueError: the value "255.255.255.256" is unacceptable.
<a name="L896" class="line-number"> 896 </a>    &gt;&gt;&gt; vtor.check('ip_addr', '1.2.3.4.5')
<a name="L897" class="line-number"> 897 </a>    Traceback (most recent call last):
<a name="L898" class="line-number"> 898 </a>    VdtValueError: the value "1.2.3.4.5" is unacceptable.
<a name="L899" class="line-number"> 899 </a>    &gt;&gt;&gt; vtor.check('ip_addr', '1.2.3. 4')
<a name="L900" class="line-number"> 900 </a>    Traceback (most recent call last):
<a name="L901" class="line-number"> 901 </a>    VdtValueError: the value "1.2.3. 4" is unacceptable.
<a name="L902" class="line-number"> 902 </a>    &gt;&gt;&gt; vtor.check('ip_addr', 0)
<a name="L903" class="line-number"> 903 </a>    Traceback (most recent call last):
<a name="L904" class="line-number"> 904 </a>    VdtTypeError: the value "0" is of the wrong type.
<a name="L905" class="line-number"> 905 </a>    """</span>
<a name="L906" class="line-number"> 906 </a>    <span class="python-keyword">if</span> <span class="python-keyword">not</span> <span class="python-name">isinstance</span><span class="python-operator">(</span><span class="python-name">value</span><span class="python-operator">,</span> <span class="python-name">StringTypes</span><span class="python-operator">)</span><span class="python-operator">:</span>
<a name="L907" class="line-number"> 907 </a>        <span class="python-keyword">raise</span> <span class="python-name">VdtTypeError</span><span class="python-operator">(</span><span class="python-name">value</span><span class="python-operator">)</span>
<a name="L908" class="line-number"> 908 </a>    <span class="python-name">value</span> <span class="python-operator">=</span> <span class="python-name">value</span><span class="python-operator">.</span><span class="python-name">strip</span><span class="python-operator">(</span><span class="python-operator">)</span>
<a name="L909" class="line-number"> 909 </a>    <span class="python-keyword">try</span><span class="python-operator">:</span>
<a name="L910" class="line-number"> 910 </a>        <span class="python-name">dottedQuadToNum</span><span class="python-operator">(</span><span class="python-name">value</span><span class="python-operator">)</span>
<a name="L911" class="line-number"> 911 </a>    <span class="python-keyword">except</span> <span class="python-name">ValueError</span><span class="python-operator">:</span>
<a name="L912" class="line-number"> 912 </a>        <span class="python-keyword">raise</span> <span class="python-name">VdtValueError</span><span class="python-operator">(</span><span class="python-name">value</span><span class="python-operator">)</span>
<a name="L913" class="line-number"> 913 </a>    <span class="python-keyword">return</span> <span class="python-name">value</span>
<a name="L914" class="line-number"> 914 </a>
<a name="L915" class="line-number"> 915 </a><span class="python-keyword">def</span> <span class="python-name">is_list</span><span class="python-operator">(</span><span class="python-name">value</span><span class="python-operator">,</span> <span class="python-name">min</span><span class="python-operator">=</span><span class="python-name">None</span><span class="python-operator">,</span> <span class="python-name">max</span><span class="python-operator">=</span><span class="python-name">None</span><span class="python-operator">)</span><span class="python-operator">:</span>
<a name="L916" class="line-number"> 916 </a>    <span class="python-string">"""
<a name="L917" class="line-number"> 917 </a>    Check that the value is a list of values.
<a name="L918" class="line-number"> 918 </a>    
<a name="L919" class="line-number"> 919 </a>    You can optionally specify the minimum and maximum number of members.
<a name="L920" class="line-number"> 920 </a>    
<a name="L921" class="line-number"> 921 </a>    It does no check on list members.
<a name="L922" class="line-number"> 922 </a>    
<a name="L923" class="line-number"> 923 </a>    &gt;&gt;&gt; vtor.check('list', ())
<a name="L924" class="line-number"> 924 </a>    ()
<a name="L925" class="line-number"> 925 </a>    &gt;&gt;&gt; vtor.check('list', [])
<a name="L926" class="line-number"> 926 </a>    []
<a name="L927" class="line-number"> 927 </a>    &gt;&gt;&gt; vtor.check('list', (1, 2))
<a name="L928" class="line-number"> 928 </a>    (1, 2)
<a name="L929" class="line-number"> 929 </a>    &gt;&gt;&gt; vtor.check('list', [1, 2])
<a name="L930" class="line-number"> 930 </a>    [1, 2]
<a name="L931" class="line-number"> 931 </a>    &gt;&gt;&gt; vtor.check('list', '12')
<a name="L932" class="line-number"> 932 </a>    '12'
<a name="L933" class="line-number"> 933 </a>    &gt;&gt;&gt; vtor.check('list(3)', (1, 2))
<a name="L934" class="line-number"> 934 </a>    Traceback (most recent call last):
<a name="L935" class="line-number"> 935 </a>    VdtValueTooShortError: the value "(1, 2)" is too short.
<a name="L936" class="line-number"> 936 </a>    &gt;&gt;&gt; vtor.check('list(max=5)', (1, 2, 3, 4, 5, 6))
<a name="L937" class="line-number"> 937 </a>    Traceback (most recent call last):
<a name="L938" class="line-number"> 938 </a>    VdtValueTooLongError: the value "(1, 2, 3, 4, 5, 6)" is too long.
<a name="L939" class="line-number"> 939 </a>    &gt;&gt;&gt; vtor.check('list(min=3, max=5)', (1, 2, 3, 4))
<a name="L940" class="line-number"> 940 </a>    (1, 2, 3, 4)
<a name="L941" class="line-number"> 941 </a>    &gt;&gt;&gt; vtor.check('list', 0)
<a name="L942" class="line-number"> 942 </a>    Traceback (most recent call last):
<a name="L943" class="line-number"> 943 </a>    VdtTypeError: the value "0" is of the wrong type.
<a name="L944" class="line-number"> 944 </a>    """</span>
<a name="L945" class="line-number"> 945 </a>    <span class="python-operator">(</span><span class="python-name">min_len</span><span class="python-operator">,</span> <span class="python-name">max_len</span><span class="python-operator">)</span> <span class="python-operator">=</span> <span class="python-name">_is_num_param</span><span class="python-operator">(</span><span class="python-operator">(</span><span class="python-string">'min'</span><span class="python-operator">,</span> <span class="python-string">'max'</span><span class="python-operator">)</span><span class="python-operator">,</span> <span class="python-operator">(</span><span class="python-name">min</span><span class="python-operator">,</span> <span class="python-name">max</span><span class="python-operator">)</span><span class="python-operator">)</span>
<a name="L946" class="line-number"> 946 </a>    <span class="python-keyword">try</span><span class="python-operator">:</span>
<a name="L947" class="line-number"> 947 </a>        <span class="python-name">num_members</span> <span class="python-operator">=</span> <span class="python-name">len</span><span class="python-operator">(</span><span class="python-name">value</span><span class="python-operator">)</span>
<a name="L948" class="line-number"> 948 </a>    <span class="python-keyword">except</span> <span class="python-name">TypeError</span><span class="python-operator">:</span>
<a name="L949" class="line-number"> 949 </a>        <span class="python-keyword">raise</span> <span class="python-name">VdtTypeError</span><span class="python-operator">(</span><span class="python-name">value</span><span class="python-operator">)</span>
<a name="L950" class="line-number"> 950 </a>    <span class="python-keyword">if</span> <span class="python-name">min_len</span> <span class="python-keyword">is</span> <span class="python-keyword">not</span> <span class="python-name">None</span> <span class="python-keyword">and</span> <span class="python-name">num_members</span> <span class="python-operator">&lt;</span> <span class="python-name">min_len</span><span class="python-operator">:</span>
<a name="L951" class="line-number"> 951 </a>        <span class="python-keyword">raise</span> <span class="python-name">VdtValueTooShortError</span><span class="python-operator">(</span><span class="python-name">value</span><span class="python-operator">)</span>
<a name="L952" class="line-number"> 952 </a>    <span class="python-keyword">if</span> <span class="python-name">max_len</span> <span class="python-keyword">is</span> <span class="python-keyword">not</span> <span class="python-name">None</span> <span class="python-keyword">and</span> <span class="python-name">num_members</span> <span class="python-operator">&gt;</span> <span class="python-name">max_len</span><span class="python-operator">:</span>
<a name="L953" class="line-number"> 953 </a>        <span class="python-keyword">raise</span> <span class="python-name">VdtValueTooLongError</span><span class="python-operator">(</span><span class="python-name">value</span><span class="python-operator">)</span>
<a name="L954" class="line-number"> 954 </a>    <span class="python-keyword">return</span> <span class="python-name">value</span>
<a name="L955" class="line-number"> 955 </a>
<a name="L956" class="line-number"> 956 </a><span class="python-keyword">def</span> <span class="python-name">is_string</span><span class="python-operator">(</span><span class="python-name">value</span><span class="python-operator">,</span> <span class="python-name">min</span><span class="python-operator">=</span><span class="python-name">None</span><span class="python-operator">,</span> <span class="python-name">max</span><span class="python-operator">=</span><span class="python-name">None</span><span class="python-operator">)</span><span class="python-operator">:</span>
<a name="L957" class="line-number"> 957 </a>    <span class="python-string">"""
<a name="L958" class="line-number"> 958 </a>    Check that the supplied value is a string.
<a name="L959" class="line-number"> 959 </a>    
<a name="L960" class="line-number"> 960 </a>    You can optionally specify the minimum and maximum number of members.
<a name="L961" class="line-number"> 961 </a>    
<a name="L962" class="line-number"> 962 </a>    &gt;&gt;&gt; vtor.check('string', '0')
<a name="L963" class="line-number"> 963 </a>    '0'
<a name="L964" class="line-number"> 964 </a>    &gt;&gt;&gt; vtor.check('string', 0)
<a name="L965" class="line-number"> 965 </a>    Traceback (most recent call last):
<a name="L966" class="line-number"> 966 </a>    VdtTypeError: the value "0" is of the wrong type.
<a name="L967" class="line-number"> 967 </a>    &gt;&gt;&gt; vtor.check('string(2)', '12')
<a name="L968" class="line-number"> 968 </a>    '12'
<a name="L969" class="line-number"> 969 </a>    &gt;&gt;&gt; vtor.check('string(2)', '1')
<a name="L970" class="line-number"> 970 </a>    Traceback (most recent call last):
<a name="L971" class="line-number"> 971 </a>    VdtValueTooShortError: the value "1" is too short.
<a name="L972" class="line-number"> 972 </a>    &gt;&gt;&gt; vtor.check('string(min=2, max=3)', '123')
<a name="L973" class="line-number"> 973 </a>    '123'
<a name="L974" class="line-number"> 974 </a>    &gt;&gt;&gt; vtor.check('string(min=2, max=3)', '1234')
<a name="L975" class="line-number"> 975 </a>    Traceback (most recent call last):
<a name="L976" class="line-number"> 976 </a>    VdtValueTooLongError: the value "1234" is too long.
<a name="L977" class="line-number"> 977 </a>    """</span>
<a name="L978" class="line-number"> 978 </a>    <span class="python-keyword">if</span> <span class="python-keyword">not</span> <span class="python-name">isinstance</span><span class="python-operator">(</span><span class="python-name">value</span><span class="python-operator">,</span> <span class="python-name">StringTypes</span><span class="python-operator">)</span><span class="python-operator">:</span>
<a name="L979" class="line-number"> 979 </a>        <span class="python-keyword">raise</span> <span class="python-name">VdtTypeError</span><span class="python-operator">(</span><span class="python-name">value</span><span class="python-operator">)</span>
<a name="L980" class="line-number"> 980 </a>    <span class="python-operator">(</span><span class="python-name">min_len</span><span class="python-operator">,</span> <span class="python-name">max_len</span><span class="python-operator">)</span> <span class="python-operator">=</span> <span class="python-name">_is_num_param</span><span class="python-operator">(</span><span class="python-operator">(</span><span class="python-string">'min'</span><span class="python-operator">,</span> <span class="python-string">'max'</span><span class="python-operator">)</span><span class="python-operator">,</span> <span class="python-operator">(</span><span class="python-name">min</span><span class="python-operator">,</span> <span class="python-name">max</span><span class="python-operator">)</span><span class="python-operator">)</span>
<a name="L981" class="line-number"> 981 </a>    <span class="python-keyword">try</span><span class="python-operator">:</span>
<a name="L982" class="line-number"> 982 </a>        <span class="python-name">num_members</span> <span class="python-operator">=</span> <span class="python-name">len</span><span class="python-operator">(</span><span class="python-name">value</span><span class="python-operator">)</span>
<a name="L983" class="line-number"> 983 </a>    <span class="python-keyword">except</span> <span class="python-name">TypeError</span><span class="python-operator">:</span>
<a name="L984" class="line-number"> 984 </a>        <span class="python-keyword">raise</span> <span class="python-name">VdtTypeError</span><span class="python-operator">(</span><span class="python-name">value</span><span class="python-operator">)</span>
<a name="L985" class="line-number"> 985 </a>    <span class="python-keyword">if</span> <span class="python-name">min_len</span> <span class="python-keyword">is</span> <span class="python-keyword">not</span> <span class="python-name">None</span> <span class="python-keyword">and</span> <span class="python-name">num_members</span> <span class="python-operator">&lt;</span> <span class="python-name">min_len</span><span class="python-operator">:</span>
<a name="L986" class="line-number"> 986 </a>        <span class="python-keyword">raise</span> <span class="python-name">VdtValueTooShortError</span><span class="python-operator">(</span><span class="python-name">value</span><span class="python-operator">)</span>
<a name="L987" class="line-number"> 987 </a>    <span class="python-keyword">if</span> <span class="python-name">max_len</span> <span class="python-keyword">is</span> <span class="python-keyword">not</span> <span class="python-name">None</span> <span class="python-keyword">and</span> <span class="python-name">num_members</span> <span class="python-operator">&gt;</span> <span class="python-name">max_len</span><span class="python-operator">:</span>
<a name="L988" class="line-number"> 988 </a>        <span class="python-keyword">raise</span> <span class="python-name">VdtValueTooLongError</span><span class="python-operator">(</span><span class="python-name">value</span><span class="python-operator">)</span>
<a name="L989" class="line-number"> 989 </a>    <span class="python-keyword">return</span> <span class="python-name">value</span>
<a name="L990" class="line-number"> 990 </a>
<a name="L991" class="line-number"> 991 </a><span class="python-keyword">def</span> <span class="python-name">is_int_list</span><span class="python-operator">(</span><span class="python-name">value</span><span class="python-operator">,</span> <span class="python-name">min</span><span class="python-operator">=</span><span class="python-name">None</span><span class="python-operator">,</span> <span class="python-name">max</span><span class="python-operator">=</span><span class="python-name">None</span><span class="python-operator">)</span><span class="python-operator">:</span>
<a name="L992" class="line-number"> 992 </a>    <span class="python-string">"""
<a name="L993" class="line-number"> 993 </a>    Check that the value is a list of integers.
<a name="L994" class="line-number"> 994 </a>    
<a name="L995" class="line-number"> 995 </a>    You can optionally specify the minimum and maximum number of members.
<a name="L996" class="line-number"> 996 </a>    
<a name="L997" class="line-number"> 997 </a>    Each list member is checked that it is an integer.
<a name="L998" class="line-number"> 998 </a>    
<a name="L999" class="line-number"> 999 </a>    &gt;&gt;&gt; vtor.check('int_list', ())
<a name="L1000" class="line-number">1000 </a>    []
<a name="L1001" class="line-number">1001 </a>    &gt;&gt;&gt; vtor.check('int_list', [])
<a name="L1002" class="line-number">1002 </a>    []
<a name="L1003" class="line-number">1003 </a>    &gt;&gt;&gt; vtor.check('int_list', (1, 2))
<a name="L1004" class="line-number">1004 </a>    [1, 2]
<a name="L1005" class="line-number">1005 </a>    &gt;&gt;&gt; vtor.check('int_list', [1, 2])
<a name="L1006" class="line-number">1006 </a>    [1, 2]
<a name="L1007" class="line-number">1007 </a>    &gt;&gt;&gt; vtor.check('int_list', [1, 'a'])
<a name="L1008" class="line-number">1008 </a>    Traceback (most recent call last):
<a name="L1009" class="line-number">1009 </a>    VdtTypeError: the value "a" is of the wrong type.
<a name="L1010" class="line-number">1010 </a>    """</span>
<a name="L1011" class="line-number">1011 </a>    <span class="python-keyword">return</span> <span class="python-operator">[</span><span class="python-name">is_integer</span><span class="python-operator">(</span><span class="python-name">mem</span><span class="python-operator">)</span> <span class="python-keyword">for</span> <span class="python-name">mem</span> <span class="python-keyword">in</span> <span class="python-name">is_list</span><span class="python-operator">(</span><span class="python-name">value</span><span class="python-operator">,</span> <span class="python-name">min</span><span class="python-operator">,</span> <span class="python-name">max</span><span class="python-operator">)</span><span class="python-operator">]</span>
<a name="L1012" class="line-number">1012 </a>
<a name="L1013" class="line-number">1013 </a><span class="python-keyword">def</span> <span class="python-name">is_bool_list</span><span class="python-operator">(</span><span class="python-name">value</span><span class="python-operator">,</span> <span class="python-name">min</span><span class="python-operator">=</span><span class="python-name">None</span><span class="python-operator">,</span> <span class="python-name">max</span><span class="python-operator">=</span><span class="python-name">None</span><span class="python-operator">)</span><span class="python-operator">:</span>
<a name="L1014" class="line-number">1014 </a>    <span class="python-string">"""
<a name="L1015" class="line-number">1015 </a>    Check that the value is a list of booleans.
<a name="L1016" class="line-number">1016 </a>    
<a name="L1017" class="line-number">1017 </a>    You can optionally specify the minimum and maximum number of members.
<a name="L1018" class="line-number">1018 </a>    
<a name="L1019" class="line-number">1019 </a>    Each list member is checked that it is a boolean.
<a name="L1020" class="line-number">1020 </a>    
<a name="L1021" class="line-number">1021 </a>    &gt;&gt;&gt; vtor.check('bool_list', ())
<a name="L1022" class="line-number">1022 </a>    []
<a name="L1023" class="line-number">1023 </a>    &gt;&gt;&gt; vtor.check('bool_list', [])
<a name="L1024" class="line-number">1024 </a>    []
<a name="L1025" class="line-number">1025 </a>    &gt;&gt;&gt; check_res = vtor.check('bool_list', (True, False))
<a name="L1026" class="line-number">1026 </a>    &gt;&gt;&gt; check_res == [True, False]
<a name="L1027" class="line-number">1027 </a>    1
<a name="L1028" class="line-number">1028 </a>    &gt;&gt;&gt; check_res = vtor.check('bool_list', [True, False])
<a name="L1029" class="line-number">1029 </a>    &gt;&gt;&gt; check_res == [True, False]
<a name="L1030" class="line-number">1030 </a>    1
<a name="L1031" class="line-number">1031 </a>    &gt;&gt;&gt; vtor.check('bool_list', [True, 'a'])
<a name="L1032" class="line-number">1032 </a>    Traceback (most recent call last):
<a name="L1033" class="line-number">1033 </a>    VdtTypeError: the value "a" is of the wrong type.
<a name="L1034" class="line-number">1034 </a>    """</span>
<a name="L1035" class="line-number">1035 </a>    <span class="python-keyword">return</span> <span class="python-operator">[</span><span class="python-name">is_boolean</span><span class="python-operator">(</span><span class="python-name">mem</span><span class="python-operator">)</span> <span class="python-keyword">for</span> <span class="python-name">mem</span> <span class="python-keyword">in</span> <span class="python-name">is_list</span><span class="python-operator">(</span><span class="python-name">value</span><span class="python-operator">,</span> <span class="python-name">min</span><span class="python-operator">,</span> <span class="python-name">max</span><span class="python-operator">)</span><span class="python-operator">]</span>
<a name="L1036" class="line-number">1036 </a>
<a name="L1037" class="line-number">1037 </a><span class="python-keyword">def</span> <span class="python-name">is_float_list</span><span class="python-operator">(</span><span class="python-name">value</span><span class="python-operator">,</span> <span class="python-name">min</span><span class="python-operator">=</span><span class="python-name">None</span><span class="python-operator">,</span> <span class="python-name">max</span><span class="python-operator">=</span><span class="python-name">None</span><span class="python-operator">)</span><span class="python-operator">:</span>
<a name="L1038" class="line-number">1038 </a>    <span class="python-string">"""
<a name="L1039" class="line-number">1039 </a>    Check that the value is a list of floats.
<a name="L1040" class="line-number">1040 </a>    
<a name="L1041" class="line-number">1041 </a>    You can optionally specify the minimum and maximum number of members.
<a name="L1042" class="line-number">1042 </a>    
<a name="L1043" class="line-number">1043 </a>    Each list member is checked that it is a float.
<a name="L1044" class="line-number">1044 </a>    
<a name="L1045" class="line-number">1045 </a>    &gt;&gt;&gt; vtor.check('float_list', ())
<a name="L1046" class="line-number">1046 </a>    []
<a name="L1047" class="line-number">1047 </a>    &gt;&gt;&gt; vtor.check('float_list', [])
<a name="L1048" class="line-number">1048 </a>    []
<a name="L1049" class="line-number">1049 </a>    &gt;&gt;&gt; vtor.check('float_list', (1, 2.0))
<a name="L1050" class="line-number">1050 </a>    [1.0, 2.0]
<a name="L1051" class="line-number">1051 </a>    &gt;&gt;&gt; vtor.check('float_list', [1, 2.0])
<a name="L1052" class="line-number">1052 </a>    [1.0, 2.0]
<a name="L1053" class="line-number">1053 </a>    &gt;&gt;&gt; vtor.check('float_list', [1, 'a'])
<a name="L1054" class="line-number">1054 </a>    Traceback (most recent call last):
<a name="L1055" class="line-number">1055 </a>    VdtTypeError: the value "a" is of the wrong type.
<a name="L1056" class="line-number">1056 </a>    """</span>
<a name="L1057" class="line-number">1057 </a>    <span class="python-keyword">return</span> <span class="python-operator">[</span><span class="python-name">is_float</span><span class="python-operator">(</span><span class="python-name">mem</span><span class="python-operator">)</span> <span class="python-keyword">for</span> <span class="python-name">mem</span> <span class="python-keyword">in</span> <span class="python-name">is_list</span><span class="python-operator">(</span><span class="python-name">value</span><span class="python-operator">,</span> <span class="python-name">min</span><span class="python-operator">,</span> <span class="python-name">max</span><span class="python-operator">)</span><span class="python-operator">]</span>
<a name="L1058" class="line-number">1058 </a>
<a name="L1059" class="line-number">1059 </a><span class="python-keyword">def</span> <span class="python-name">is_string_list</span><span class="python-operator">(</span><span class="python-name">value</span><span class="python-operator">,</span> <span class="python-name">min</span><span class="python-operator">=</span><span class="python-name">None</span><span class="python-operator">,</span> <span class="python-name">max</span><span class="python-operator">=</span><span class="python-name">None</span><span class="python-operator">)</span><span class="python-operator">:</span>
<a name="L1060" class="line-number">1060 </a>    <span class="python-string">"""
<a name="L1061" class="line-number">1061 </a>    Check that the value is a list of strings.
<a name="L1062" class="line-number">1062 </a>    
<a name="L1063" class="line-number">1063 </a>    You can optionally specify the minimum and maximum number of members.
<a name="L1064" class="line-number">1064 </a>    
<a name="L1065" class="line-number">1065 </a>    Each list member is checked that it is a string.
<a name="L1066" class="line-number">1066 </a>    
<a name="L1067" class="line-number">1067 </a>    &gt;&gt;&gt; vtor.check('string_list', ())
<a name="L1068" class="line-number">1068 </a>    []
<a name="L1069" class="line-number">1069 </a>    &gt;&gt;&gt; vtor.check('string_list', [])
<a name="L1070" class="line-number">1070 </a>    []
<a name="L1071" class="line-number">1071 </a>    &gt;&gt;&gt; vtor.check('string_list', ('a', 'b'))
<a name="L1072" class="line-number">1072 </a>    ['a', 'b']
<a name="L1073" class="line-number">1073 </a>    &gt;&gt;&gt; vtor.check('string_list', ['a', 1])
<a name="L1074" class="line-number">1074 </a>    Traceback (most recent call last):
<a name="L1075" class="line-number">1075 </a>    VdtTypeError: the value "1" is of the wrong type.
<a name="L1076" class="line-number">1076 </a>    &gt;&gt;&gt; vtor.check('string_list', 'hello')
<a name="L1077" class="line-number">1077 </a>    Traceback (most recent call last):
<a name="L1078" class="line-number">1078 </a>    VdtTypeError: the value "hello" is of the wrong type.
<a name="L1079" class="line-number">1079 </a>    """</span>
<a name="L1080" class="line-number">1080 </a>    <span class="python-keyword">if</span> <span class="python-name">isinstance</span><span class="python-operator">(</span><span class="python-name">value</span><span class="python-operator">,</span> <span class="python-name">StringTypes</span><span class="python-operator">)</span><span class="python-operator">:</span>
<a name="L1081" class="line-number">1081 </a>        <span class="python-keyword">raise</span> <span class="python-name">VdtTypeError</span><span class="python-operator">(</span><span class="python-name">value</span><span class="python-operator">)</span>
<a name="L1082" class="line-number">1082 </a>    <span class="python-keyword">return</span> <span class="python-operator">[</span><span class="python-name">is_string</span><span class="python-operator">(</span><span class="python-name">mem</span><span class="python-operator">)</span> <span class="python-keyword">for</span> <span class="python-name">mem</span> <span class="python-keyword">in</span> <span class="python-name">is_list</span><span class="python-operator">(</span><span class="python-name">value</span><span class="python-operator">,</span> <span class="python-name">min</span><span class="python-operator">,</span> <span class="python-name">max</span><span class="python-operator">)</span><span class="python-operator">]</span>
<a name="L1083" class="line-number">1083 </a>
<a name="L1084" class="line-number">1084 </a><span class="python-keyword">def</span> <span class="python-name">is_ip_addr_list</span><span class="python-operator">(</span><span class="python-name">value</span><span class="python-operator">,</span> <span class="python-name">min</span><span class="python-operator">=</span><span class="python-name">None</span><span class="python-operator">,</span> <span class="python-name">max</span><span class="python-operator">=</span><span class="python-name">None</span><span class="python-operator">)</span><span class="python-operator">:</span>
<a name="L1085" class="line-number">1085 </a>    <span class="python-string">"""
<a name="L1086" class="line-number">1086 </a>    Check that the value is a list of IP addresses.
<a name="L1087" class="line-number">1087 </a>    
<a name="L1088" class="line-number">1088 </a>    You can optionally specify the minimum and maximum number of members.
<a name="L1089" class="line-number">1089 </a>    
<a name="L1090" class="line-number">1090 </a>    Each list member is checked that it is an IP address.
<a name="L1091" class="line-number">1091 </a>    
<a name="L1092" class="line-number">1092 </a>    &gt;&gt;&gt; vtor.check('ip_addr_list', ())
<a name="L1093" class="line-number">1093 </a>    []
<a name="L1094" class="line-number">1094 </a>    &gt;&gt;&gt; vtor.check('ip_addr_list', [])
<a name="L1095" class="line-number">1095 </a>    []
<a name="L1096" class="line-number">1096 </a>    &gt;&gt;&gt; vtor.check('ip_addr_list', ('1.2.3.4', '5.6.7.8'))
<a name="L1097" class="line-number">1097 </a>    ['1.2.3.4', '5.6.7.8']
<a name="L1098" class="line-number">1098 </a>    &gt;&gt;&gt; vtor.check('ip_addr_list', ['a'])
<a name="L1099" class="line-number">1099 </a>    Traceback (most recent call last):
<a name="L1100" class="line-number">1100 </a>    VdtValueError: the value "a" is unacceptable.
<a name="L1101" class="line-number">1101 </a>    """</span>
<a name="L1102" class="line-number">1102 </a>    <span class="python-keyword">return</span> <span class="python-operator">[</span><span class="python-name">is_ip_addr</span><span class="python-operator">(</span><span class="python-name">mem</span><span class="python-operator">)</span> <span class="python-keyword">for</span> <span class="python-name">mem</span> <span class="python-keyword">in</span> <span class="python-name">is_list</span><span class="python-operator">(</span><span class="python-name">value</span><span class="python-operator">,</span> <span class="python-name">min</span><span class="python-operator">,</span> <span class="python-name">max</span><span class="python-operator">)</span><span class="python-operator">]</span>
<a name="L1103" class="line-number">1103 </a>
<a name="L1104" class="line-number">1104 </a><span class="python-name">fun_dict</span> <span class="python-operator">=</span> <span class="python-operator">{</span>
<a name="L1105" class="line-number">1105 </a>    <span class="python-string">'integer'</span><span class="python-operator">:</span> <span class="python-name">is_integer</span><span class="python-operator">,</span>
<a name="L1106" class="line-number">1106 </a>    <span class="python-string">'float'</span><span class="python-operator">:</span> <span class="python-name">is_float</span><span class="python-operator">,</span>
<a name="L1107" class="line-number">1107 </a>    <span class="python-string">'ip_addr'</span><span class="python-operator">:</span> <span class="python-name">is_ip_addr</span><span class="python-operator">,</span>
<a name="L1108" class="line-number">1108 </a>    <span class="python-string">'string'</span><span class="python-operator">:</span> <span class="python-name">is_string</span><span class="python-operator">,</span>
<a name="L1109" class="line-number">1109 </a>    <span class="python-string">'boolean'</span><span class="python-operator">:</span> <span class="python-name">is_boolean</span><span class="python-operator">,</span>
<a name="L1110" class="line-number">1110 </a><span class="python-operator">}</span>
<a name="L1111" class="line-number">1111 </a>
<a name="L1112" class="line-number">1112 </a><span class="python-keyword">def</span> <span class="python-name">is_mixed_list</span><span class="python-operator">(</span><span class="python-name">value</span><span class="python-operator">,</span> <span class="python-operator">*</span><span class="python-name">args</span><span class="python-operator">)</span><span class="python-operator">:</span>
<a name="L1113" class="line-number">1113 </a>    <span class="python-string">"""
<a name="L1114" class="line-number">1114 </a>    Check that the value is a list.
<a name="L1115" class="line-number">1115 </a>    Allow specifying the type of each member.
<a name="L1116" class="line-number">1116 </a>    Work on lists of specific lengths.
<a name="L1117" class="line-number">1117 </a>    
<a name="L1118" class="line-number">1118 </a>    You specify each member as a positional argument specifying type
<a name="L1119" class="line-number">1119 </a>    
<a name="L1120" class="line-number">1120 </a>    Each type should be one of the following strings :
<a name="L1121" class="line-number">1121 </a>      'integer', 'float', 'ip_addr', 'string', 'boolean'
<a name="L1122" class="line-number">1122 </a>    
<a name="L1123" class="line-number">1123 </a>    So you can specify a list of two strings, followed by
<a name="L1124" class="line-number">1124 </a>    two integers as :
<a name="L1125" class="line-number">1125 </a>    
<a name="L1126" class="line-number">1126 </a>      mixed_list('string', 'string', 'integer', 'integer')
<a name="L1127" class="line-number">1127 </a>    
<a name="L1128" class="line-number">1128 </a>    The length of the list must match the number of positional
<a name="L1129" class="line-number">1129 </a>    arguments you supply.
<a name="L1130" class="line-number">1130 </a>    
<a name="L1131" class="line-number">1131 </a>    &gt;&gt;&gt; mix_str = "mixed_list('integer', 'float', 'ip_addr', 'string', 'boolean')"
<a name="L1132" class="line-number">1132 </a>    &gt;&gt;&gt; check_res = vtor.check(mix_str, (1, 2.0, '1.2.3.4', 'a', True))
<a name="L1133" class="line-number">1133 </a>    &gt;&gt;&gt; check_res == [1, 2.0, '1.2.3.4', 'a', True]
<a name="L1134" class="line-number">1134 </a>    1
<a name="L1135" class="line-number">1135 </a>    &gt;&gt;&gt; check_res = vtor.check(mix_str, ('1', '2.0', '1.2.3.4', 'a', 'True'))
<a name="L1136" class="line-number">1136 </a>    &gt;&gt;&gt; check_res == [1, 2.0, '1.2.3.4', 'a', True]
<a name="L1137" class="line-number">1137 </a>    1
<a name="L1138" class="line-number">1138 </a>    &gt;&gt;&gt; vtor.check(mix_str, ('b', 2.0, '1.2.3.4', 'a', True))
<a name="L1139" class="line-number">1139 </a>    Traceback (most recent call last):
<a name="L1140" class="line-number">1140 </a>    VdtTypeError: the value "b" is of the wrong type.
<a name="L1141" class="line-number">1141 </a>    &gt;&gt;&gt; vtor.check(mix_str, (1, 2.0, '1.2.3.4', 'a'))
<a name="L1142" class="line-number">1142 </a>    Traceback (most recent call last):
<a name="L1143" class="line-number">1143 </a>    VdtValueTooShortError: the value "(1, 2.0, '1.2.3.4', 'a')" is too short.
<a name="L1144" class="line-number">1144 </a>    &gt;&gt;&gt; vtor.check(mix_str, (1, 2.0, '1.2.3.4', 'a', 1, 'b'))
<a name="L1145" class="line-number">1145 </a>    Traceback (most recent call last):
<a name="L1146" class="line-number">1146 </a>    VdtValueTooLongError: the value "(1, 2.0, '1.2.3.4', 'a', 1, 'b')" is too long.
<a name="L1147" class="line-number">1147 </a>    &gt;&gt;&gt; vtor.check(mix_str, 0)
<a name="L1148" class="line-number">1148 </a>    Traceback (most recent call last):
<a name="L1149" class="line-number">1149 </a>    VdtTypeError: the value "0" is of the wrong type.
<a name="L1150" class="line-number">1150 </a>    
<a name="L1151" class="line-number">1151 </a>    This test requires an elaborate setup, because of a change in error string
<a name="L1152" class="line-number">1152 </a>    output from the interpreter between Python 2.2 and 2.3 .
<a name="L1153" class="line-number">1153 </a>    
<a name="L1154" class="line-number">1154 </a>    &gt;&gt;&gt; res_seq = (
<a name="L1155" class="line-number">1155 </a>    ...     'passed an incorrect value "',
<a name="L1156" class="line-number">1156 </a>    ...     'yoda',
<a name="L1157" class="line-number">1157 </a>    ...     '" for parameter "mixed_list".',
<a name="L1158" class="line-number">1158 </a>    ... )
<a name="L1159" class="line-number">1159 </a>    &gt;&gt;&gt; if INTP_VER == (2, 2):
<a name="L1160" class="line-number">1160 </a>    ...     res_str = "".join(res_seq)
<a name="L1161" class="line-number">1161 </a>    ... else:
<a name="L1162" class="line-number">1162 </a>    ...     res_str = "'".join(res_seq)
<a name="L1163" class="line-number">1163 </a>    &gt;&gt;&gt; try:
<a name="L1164" class="line-number">1164 </a>    ...     vtor.check('mixed_list("yoda")', ('a'))
<a name="L1165" class="line-number">1165 </a>    ... except VdtParamError, err:
<a name="L1166" class="line-number">1166 </a>    ...     str(err) == res_str
<a name="L1167" class="line-number">1167 </a>    1
<a name="L1168" class="line-number">1168 </a>    """</span>
<a name="L1169" class="line-number">1169 </a>    <span class="python-keyword">try</span><span class="python-operator">:</span>
<a name="L1170" class="line-number">1170 </a>        <span class="python-name">length</span> <span class="python-operator">=</span> <span class="python-name">len</span><span class="python-operator">(</span><span class="python-name">value</span><span class="python-operator">)</span>
<a name="L1171" class="line-number">1171 </a>    <span class="python-keyword">except</span> <span class="python-name">TypeError</span><span class="python-operator">:</span>
<a name="L1172" class="line-number">1172 </a>        <span class="python-keyword">raise</span> <span class="python-name">VdtTypeError</span><span class="python-operator">(</span><span class="python-name">value</span><span class="python-operator">)</span>
<a name="L1173" class="line-number">1173 </a>    <span class="python-keyword">if</span> <span class="python-name">length</span> <span class="python-operator">&lt;</span> <span class="python-name">len</span><span class="python-operator">(</span><span class="python-name">args</span><span class="python-operator">)</span><span class="python-operator">:</span>
<a name="L1174" class="line-number">1174 </a>        <span class="python-keyword">raise</span> <span class="python-name">VdtValueTooShortError</span><span class="python-operator">(</span><span class="python-name">value</span><span class="python-operator">)</span>
<a name="L1175" class="line-number">1175 </a>    <span class="python-keyword">elif</span> <span class="python-name">length</span> <span class="python-operator">&gt;</span> <span class="python-name">len</span><span class="python-operator">(</span><span class="python-name">args</span><span class="python-operator">)</span><span class="python-operator">:</span>
<a name="L1176" class="line-number">1176 </a>        <span class="python-keyword">raise</span> <span class="python-name">VdtValueTooLongError</span><span class="python-operator">(</span><span class="python-name">value</span><span class="python-operator">)</span>
<a name="L1177" class="line-number">1177 </a>    <span class="python-keyword">try</span><span class="python-operator">:</span>
<a name="L1178" class="line-number">1178 </a>        <span class="python-keyword">return</span> <span class="python-operator">[</span><span class="python-name">fun_dict</span><span class="python-operator">[</span><span class="python-name">arg</span><span class="python-operator">]</span><span class="python-operator">(</span><span class="python-name">val</span><span class="python-operator">)</span> <span class="python-keyword">for</span> <span class="python-name">arg</span><span class="python-operator">,</span> <span class="python-name">val</span> <span class="python-keyword">in</span> <span class="python-name">zip</span><span class="python-operator">(</span><span class="python-name">args</span><span class="python-operator">,</span> <span class="python-name">value</span><span class="python-operator">)</span><span class="python-operator">]</span>
<a name="L1179" class="line-number">1179 </a>    <span class="python-keyword">except</span> <span class="python-name">KeyError</span><span class="python-operator">,</span> <span class="python-name">e</span><span class="python-operator">:</span>
<a name="L1180" class="line-number">1180 </a>        <span class="python-keyword">raise</span> <span class="python-name">VdtParamError</span><span class="python-operator">(</span><span class="python-string">'mixed_list'</span><span class="python-operator">,</span> <span class="python-name">e</span><span class="python-operator">)</span>
<a name="L1181" class="line-number">1181 </a>
<a name="L1182" class="line-number">1182 </a><span class="python-keyword">def</span> <span class="python-name">is_option</span><span class="python-operator">(</span><span class="python-name">value</span><span class="python-operator">,</span> <span class="python-operator">*</span><span class="python-name">options</span><span class="python-operator">)</span><span class="python-operator">:</span>
<a name="L1183" class="line-number">1183 </a>    <span class="python-string">"""
<a name="L1184" class="line-number">1184 </a>    This check matches the value to any of a set of options.
<a name="L1185" class="line-number">1185 </a>    
<a name="L1186" class="line-number">1186 </a>    &gt;&gt;&gt; vtor.check('option("yoda", "jedi")', 'yoda')
<a name="L1187" class="line-number">1187 </a>    'yoda'
<a name="L1188" class="line-number">1188 </a>    &gt;&gt;&gt; vtor.check('option("yoda", "jedi")', 'jed')
<a name="L1189" class="line-number">1189 </a>    Traceback (most recent call last):
<a name="L1190" class="line-number">1190 </a>    VdtValueError: the value "jed" is unacceptable.
<a name="L1191" class="line-number">1191 </a>    &gt;&gt;&gt; vtor.check('option("yoda", "jedi")', 0)
<a name="L1192" class="line-number">1192 </a>    Traceback (most recent call last):
<a name="L1193" class="line-number">1193 </a>    VdtTypeError: the value "0" is of the wrong type.
<a name="L1194" class="line-number">1194 </a>    """</span>
<a name="L1195" class="line-number">1195 </a>    <span class="python-keyword">if</span> <span class="python-keyword">not</span> <span class="python-name">isinstance</span><span class="python-operator">(</span><span class="python-name">value</span><span class="python-operator">,</span> <span class="python-name">StringTypes</span><span class="python-operator">)</span><span class="python-operator">:</span>
<a name="L1196" class="line-number">1196 </a>        <span class="python-keyword">raise</span> <span class="python-name">VdtTypeError</span><span class="python-operator">(</span><span class="python-name">value</span><span class="python-operator">)</span>
<a name="L1197" class="line-number">1197 </a>    <span class="python-keyword">if</span> <span class="python-keyword">not</span> <span class="python-name">value</span> <span class="python-keyword">in</span> <span class="python-name">options</span><span class="python-operator">:</span>
<a name="L1198" class="line-number">1198 </a>        <span class="python-keyword">raise</span> <span class="python-name">VdtValueError</span><span class="python-operator">(</span><span class="python-name">value</span><span class="python-operator">)</span>
<a name="L1199" class="line-number">1199 </a>    <span class="python-keyword">return</span> <span class="python-name">value</span>
<a name="L1200" class="line-number">1200 </a>
<a name="L1201" class="line-number">1201 </a><span class="python-keyword">def</span> <span class="python-name">_test</span><span class="python-operator">(</span><span class="python-name">value</span><span class="python-operator">,</span> <span class="python-operator">*</span><span class="python-name">args</span><span class="python-operator">,</span> <span class="python-operator">**</span><span class="python-name">keywargs</span><span class="python-operator">)</span><span class="python-operator">:</span>
<a name="L1202" class="line-number">1202 </a>    <span class="python-string">"""
<a name="L1203" class="line-number">1203 </a>    A function that exists for test purposes.
<a name="L1204" class="line-number">1204 </a>    
<a name="L1205" class="line-number">1205 </a>    &gt;&gt;&gt; checks = [
<a name="L1206" class="line-number">1206 </a>    ...     '3, 6, min=1, max=3, test=list(a, b, c)',
<a name="L1207" class="line-number">1207 </a>    ...     '3',
<a name="L1208" class="line-number">1208 </a>    ...     '3, 6',
<a name="L1209" class="line-number">1209 </a>    ...     '3,',
<a name="L1210" class="line-number">1210 </a>    ...     'min=1, test="a b c"',
<a name="L1211" class="line-number">1211 </a>    ...     'min=5, test="a, b, c"',
<a name="L1212" class="line-number">1212 </a>    ...     'min=1, max=3, test="a, b, c"',
<a name="L1213" class="line-number">1213 </a>    ...     'min=-100, test=-99',
<a name="L1214" class="line-number">1214 </a>    ...     'min=1, max=3',
<a name="L1215" class="line-number">1215 </a>    ...     '3, 6, test="36"',
<a name="L1216" class="line-number">1216 </a>    ...     '3, 6, test="a, b, c"',
<a name="L1217" class="line-number">1217 </a>    ...     '3, max=3, test=list("a", "b", "c")',
<a name="L1218" class="line-number">1218 </a>    ...     '''3, max=3, test=list("'a'", 'b', "x=(c)")''',
<a name="L1219" class="line-number">1219 </a>    ...     "test='x=fish(3)'",
<a name="L1220" class="line-number">1220 </a>    ...    ]
<a name="L1221" class="line-number">1221 </a>    &gt;&gt;&gt; v = Validator({'test': _test})
<a name="L1222" class="line-number">1222 </a>    &gt;&gt;&gt; for entry in checks:
<a name="L1223" class="line-number">1223 </a>    ...     print v.check(('test(%s)' % entry), 3)
<a name="L1224" class="line-number">1224 </a>    (3, ('3', '6'), {'test': ['a', 'b', 'c'], 'max': '3', 'min': '1'})
<a name="L1225" class="line-number">1225 </a>    (3, ('3',), {})
<a name="L1226" class="line-number">1226 </a>    (3, ('3', '6'), {})
<a name="L1227" class="line-number">1227 </a>    (3, ('3',), {})
<a name="L1228" class="line-number">1228 </a>    (3, (), {'test': 'a b c', 'min': '1'})
<a name="L1229" class="line-number">1229 </a>    (3, (), {'test': 'a, b, c', 'min': '5'})
<a name="L1230" class="line-number">1230 </a>    (3, (), {'test': 'a, b, c', 'max': '3', 'min': '1'})
<a name="L1231" class="line-number">1231 </a>    (3, (), {'test': '-99', 'min': '-100'})
<a name="L1232" class="line-number">1232 </a>    (3, (), {'max': '3', 'min': '1'})
<a name="L1233" class="line-number">1233 </a>    (3, ('3', '6'), {'test': '36'})
<a name="L1234" class="line-number">1234 </a>    (3, ('3', '6'), {'test': 'a, b, c'})
<a name="L1235" class="line-number">1235 </a>    (3, ('3',), {'test': ['a', 'b', 'c'], 'max': '3'})
<a name="L1236" class="line-number">1236 </a>    (3, ('3',), {'test': ["'a'", 'b', 'x=(c)'], 'max': '3'})
<a name="L1237" class="line-number">1237 </a>    (3, (), {'test': 'x=fish(3)'})
<a name="L1238" class="line-number">1238 </a>    """</span>
<a name="L1239" class="line-number">1239 </a>    <span class="python-keyword">return</span> <span class="python-operator">(</span><span class="python-name">value</span><span class="python-operator">,</span> <span class="python-name">args</span><span class="python-operator">,</span> <span class="python-name">keywargs</span><span class="python-operator">)</span>
<a name="L1240" class="line-number">1240 </a>
<a name="L1241" class="line-number">1241 </a>
<a name="L1242" class="line-number">1242 </a><span class="python-keyword">if</span> <span class="python-name">__name__</span> <span class="python-operator">==</span> <span class="python-string">'__main__'</span><span class="python-operator">:</span>
<a name="L1243" class="line-number">1243 </a>    <span class="python-comment"># run the code tests in doctest format</span>
<a name="L1244" class="line-number">1244 </a>    <span class="python-keyword">import</span> <span class="python-name">doctest</span>
<a name="L1245" class="line-number">1245 </a>    <span class="python-name">m</span> <span class="python-operator">=</span> <span class="python-name">sys</span><span class="python-operator">.</span><span class="python-name">modules</span><span class="python-operator">.</span><span class="python-name">get</span><span class="python-operator">(</span><span class="python-string">'__main__'</span><span class="python-operator">)</span>
<a name="L1246" class="line-number">1246 </a>    <span class="python-name">globs</span> <span class="python-operator">=</span> <span class="python-name">m</span><span class="python-operator">.</span><span class="python-name">__dict__</span><span class="python-operator">.</span><span class="python-name">copy</span><span class="python-operator">(</span><span class="python-operator">)</span>
<a name="L1247" class="line-number">1247 </a>    <span class="python-name">globs</span><span class="python-operator">.</span><span class="python-name">update</span><span class="python-operator">(</span><span class="python-operator">{</span>
<a name="L1248" class="line-number">1248 </a>        <span class="python-string">'INTP_VER'</span><span class="python-operator">:</span> <span class="python-name">INTP_VER</span><span class="python-operator">,</span>
<a name="L1249" class="line-number">1249 </a>        <span class="python-string">'vtor'</span><span class="python-operator">:</span> <span class="python-name">Validator</span><span class="python-operator">(</span><span class="python-operator">)</span><span class="python-operator">,</span>
<a name="L1250" class="line-number">1250 </a>    <span class="python-operator">}</span><span class="python-operator">)</span>
<a name="L1251" class="line-number">1251 </a>    <span class="python-name">doctest</span><span class="python-operator">.</span><span class="python-name">testmod</span><span class="python-operator">(</span><span class="python-name">m</span><span class="python-operator">,</span> <span class="python-name">globs</span><span class="python-operator">=</span><span class="python-name">globs</span><span class="python-operator">)</span>
<a name="L1252" class="line-number">1252 </a>
<a name="L1253" class="line-number">1253 </a><span class="python-string">"""
<a name="L1254" class="line-number">1254 </a>    TODO
<a name="L1255" class="line-number">1255 </a>    ====
<a name="L1256" class="line-number">1256 </a>    
<a name="L1257" class="line-number">1257 </a>    Consider which parts of the regex stuff to put back in
<a name="L1258" class="line-number">1258 </a>    
<a name="L1259" class="line-number">1259 </a>    Can we implement a timestamp datatype ? (check DateUtil module)
<a name="L1260" class="line-number">1260 </a>    
<a name="L1261" class="line-number">1261 </a>    ISSUES
<a name="L1262" class="line-number">1262 </a>    ======
<a name="L1263" class="line-number">1263 </a>    
<a name="L1264" class="line-number">1264 </a>    If we could pull tuples out of arguments, it would be easier
<a name="L1265" class="line-number">1265 </a>    to specify arguments for 'mixed_lists'.
<a name="L1266" class="line-number">1266 </a>    
<a name="L1267" class="line-number">1267 </a>    CHANGELOG
<a name="L1268" class="line-number">1268 </a>    =========
<a name="L1269" class="line-number">1269 </a>    
<a name="L1270" class="line-number">1270 </a>    2006/12/17
<a name="L1271" class="line-number">1271 </a>    ----------
<a name="L1272" class="line-number">1272 </a>    
<a name="L1273" class="line-number">1273 </a>    By Nicola Larosa
<a name="L1274" class="line-number">1274 </a>    
<a name="L1275" class="line-number">1275 </a>    Fixed validate doc to talk of ``boolean`` instead of ``bool``, changed the
<a name="L1276" class="line-number">1276 </a>    ``is_bool`` function to ``is_boolean`` (Sourceforge bug #1531525).
<a name="L1277" class="line-number">1277 </a>    
<a name="L1278" class="line-number">1278 </a>    2006/04/23
<a name="L1279" class="line-number">1279 </a>    ----------
<a name="L1280" class="line-number">1280 </a>    
<a name="L1281" class="line-number">1281 </a>    Addressed bug where a string would pass the ``is_list`` test. (Thanks to
<a name="L1282" class="line-number">1282 </a>    Konrad Wojas.)
<a name="L1283" class="line-number">1283 </a>    
<a name="L1284" class="line-number">1284 </a>    2005/12/16
<a name="L1285" class="line-number">1285 </a>    ----------
<a name="L1286" class="line-number">1286 </a>    
<a name="L1287" class="line-number">1287 </a>    Fixed bug so we can handle keyword argument values with commas.
<a name="L1288" class="line-number">1288 </a>    
<a name="L1289" class="line-number">1289 </a>    We now use a list constructor for passing list values to keyword arguments
<a name="L1290" class="line-number">1290 </a>    (including ``default``) : ::
<a name="L1291" class="line-number">1291 </a>    
<a name="L1292" class="line-number">1292 </a>        default=list("val", "val", "val")
<a name="L1293" class="line-number">1293 </a>    
<a name="L1294" class="line-number">1294 </a>    Added the ``_test`` test. {sm;:-)}
<a name="L1295" class="line-number">1295 </a>    
<a name="L1296" class="line-number">1296 </a>    0.2.1
<a name="L1297" class="line-number">1297 </a>    
<a name="L1298" class="line-number">1298 </a>    2005/12/12
<a name="L1299" class="line-number">1299 </a>    ----------
<a name="L1300" class="line-number">1300 </a>    
<a name="L1301" class="line-number">1301 </a>    Moved a function call outside a try...except block.
<a name="L1302" class="line-number">1302 </a>    
<a name="L1303" class="line-number">1303 </a>    2005/08/25
<a name="L1304" class="line-number">1304 </a>    ----------
<a name="L1305" class="line-number">1305 </a>    
<a name="L1306" class="line-number">1306 </a>    Most errors now prefixed ``Vdt``
<a name="L1307" class="line-number">1307 </a>    
<a name="L1308" class="line-number">1308 </a>    ``VdtParamError`` no longer derives from ``VdtError``
<a name="L1309" class="line-number">1309 </a>    
<a name="L1310" class="line-number">1310 </a>    Finalised as version 0.2.0
<a name="L1311" class="line-number">1311 </a>    
<a name="L1312" class="line-number">1312 </a>    2005/08/21
<a name="L1313" class="line-number">1313 </a>    ----------
<a name="L1314" class="line-number">1314 </a>    
<a name="L1315" class="line-number">1315 </a>    By Nicola Larosa
<a name="L1316" class="line-number">1316 </a>    
<a name="L1317" class="line-number">1317 </a>    Removed the "length" argument for lists and strings, and related tests
<a name="L1318" class="line-number">1318 </a>    
<a name="L1319" class="line-number">1319 </a>    2005/08/16
<a name="L1320" class="line-number">1320 </a>    ----------
<a name="L1321" class="line-number">1321 </a>    
<a name="L1322" class="line-number">1322 </a>    By Nicola Larosa
<a name="L1323" class="line-number">1323 </a>    
<a name="L1324" class="line-number">1324 </a>    Deleted the "none" and "multiple" types and checks
<a name="L1325" class="line-number">1325 </a>    
<a name="L1326" class="line-number">1326 </a>    Added the None value for all types in Validation.check
<a name="L1327" class="line-number">1327 </a>    
<a name="L1328" class="line-number">1328 </a>    2005/08/14
<a name="L1329" class="line-number">1329 </a>    ----------
<a name="L1330" class="line-number">1330 </a>    
<a name="L1331" class="line-number">1331 </a>    By Michael Foord
<a name="L1332" class="line-number">1332 </a>    
<a name="L1333" class="line-number">1333 </a>    Removed timestamp.
<a name="L1334" class="line-number">1334 </a>    
<a name="L1335" class="line-number">1335 </a>    By Nicola Larosa
<a name="L1336" class="line-number">1336 </a>    
<a name="L1337" class="line-number">1337 </a>    Fixed bug in Validator.check: when a value that has a default is also
<a name="L1338" class="line-number">1338 </a>    specified in the config file, the default must be deleted from fun_kwargs
<a name="L1339" class="line-number">1339 </a>    anyway, otherwise the check function will get a spurious "default" keyword
<a name="L1340" class="line-number">1340 </a>    argument
<a name="L1341" class="line-number">1341 </a>    
<a name="L1342" class="line-number">1342 </a>    Added "ip_addr_list" check
<a name="L1343" class="line-number">1343 </a>    
<a name="L1344" class="line-number">1344 </a>    2005/08/13
<a name="L1345" class="line-number">1345 </a>    ----------
<a name="L1346" class="line-number">1346 </a>    
<a name="L1347" class="line-number">1347 </a>    By Nicola Larosa
<a name="L1348" class="line-number">1348 </a>    
<a name="L1349" class="line-number">1349 </a>    Updated comments at top
<a name="L1350" class="line-number">1350 </a>    
<a name="L1351" class="line-number">1351 </a>    2005/08/11
<a name="L1352" class="line-number">1352 </a>    ----------
<a name="L1353" class="line-number">1353 </a>    
<a name="L1354" class="line-number">1354 </a>    By Nicola Larosa
<a name="L1355" class="line-number">1355 </a>    
<a name="L1356" class="line-number">1356 </a>    Added test for interpreter version: raises RuntimeError if earlier than
<a name="L1357" class="line-number">1357 </a>    2.2
<a name="L1358" class="line-number">1358 </a>    
<a name="L1359" class="line-number">1359 </a>    Fixed last is_mixed_list test to work on Python 2.2 too
<a name="L1360" class="line-number">1360 </a>    
<a name="L1361" class="line-number">1361 </a>    2005/08/10
<a name="L1362" class="line-number">1362 </a>    ----------
<a name="L1363" class="line-number">1363 </a>    
<a name="L1364" class="line-number">1364 </a>    By Nicola Larosa
<a name="L1365" class="line-number">1365 </a>    
<a name="L1366" class="line-number">1366 </a>    Restored Python2.2 compatibility by avoiding usage of dict.pop
<a name="L1367" class="line-number">1367 </a>    
<a name="L1368" class="line-number">1368 </a>    2005/08/07
<a name="L1369" class="line-number">1369 </a>    ----------
<a name="L1370" class="line-number">1370 </a>    
<a name="L1371" class="line-number">1371 </a>    By Nicola Larosa
<a name="L1372" class="line-number">1372 </a>    
<a name="L1373" class="line-number">1373 </a>    Adjusted doctests for Python 2.2.3 compatibility, one test still fails
<a name="L1374" class="line-number">1374 </a>    for trivial reasons (string output delimiters)
<a name="L1375" class="line-number">1375 </a>    
<a name="L1376" class="line-number">1376 </a>    2005/08/05
<a name="L1377" class="line-number">1377 </a>    ----------
<a name="L1378" class="line-number">1378 </a>    
<a name="L1379" class="line-number">1379 </a>    By Michael Foord
<a name="L1380" class="line-number">1380 </a>    
<a name="L1381" class="line-number">1381 </a>    Added __version__, __all__, and __docformat__
<a name="L1382" class="line-number">1382 </a>    
<a name="L1383" class="line-number">1383 </a>    Replaced ``basestring`` with ``types.StringTypes``
<a name="L1384" class="line-number">1384 </a>    
<a name="L1385" class="line-number">1385 </a>    2005/07/28
<a name="L1386" class="line-number">1386 </a>    ----------
<a name="L1387" class="line-number">1387 </a>    
<a name="L1388" class="line-number">1388 </a>    By Nicola Larosa
<a name="L1389" class="line-number">1389 </a>    
<a name="L1390" class="line-number">1390 </a>    Reformatted final docstring in ReST format, indented it for easier folding
<a name="L1391" class="line-number">1391 </a>    
<a name="L1392" class="line-number">1392 </a>    2005/07/20
<a name="L1393" class="line-number">1393 </a>    ----------
<a name="L1394" class="line-number">1394 </a>    
<a name="L1395" class="line-number">1395 </a>    By Nicola Larosa
<a name="L1396" class="line-number">1396 </a>    
<a name="L1397" class="line-number">1397 </a>    Added an 'ip_addr' IPv4 address value check, with tests
<a name="L1398" class="line-number">1398 </a>    
<a name="L1399" class="line-number">1399 </a>    Updated the tests for mixed_list to include IP addresses
<a name="L1400" class="line-number">1400 </a>    
<a name="L1401" class="line-number">1401 </a>    Changed all references to value "tests" into value "checks", including
<a name="L1402" class="line-number">1402 </a>    the main Validator method, and all code tests
<a name="L1403" class="line-number">1403 </a>    
<a name="L1404" class="line-number">1404 </a>    2005/07/19
<a name="L1405" class="line-number">1405 </a>    ----------
<a name="L1406" class="line-number">1406 </a>    
<a name="L1407" class="line-number">1407 </a>    By Nicola Larosa
<a name="L1408" class="line-number">1408 </a>    
<a name="L1409" class="line-number">1409 </a>    Added even more code tests
<a name="L1410" class="line-number">1410 </a>    
<a name="L1411" class="line-number">1411 </a>    Refined the mixed_list check
<a name="L1412" class="line-number">1412 </a>    
<a name="L1413" class="line-number">1413 </a>    2005/07/18
<a name="L1414" class="line-number">1414 </a>    ----------
<a name="L1415" class="line-number">1415 </a>    
<a name="L1416" class="line-number">1416 </a>    By Nicola Larosa
<a name="L1417" class="line-number">1417 </a>    
<a name="L1418" class="line-number">1418 </a>    Introduced more VdtValueError subclasses
<a name="L1419" class="line-number">1419 </a>    
<a name="L1420" class="line-number">1420 </a>    Collapsed the ``_function_test`` and ``_function_parse`` methods into the
<a name="L1421" class="line-number">1421 </a>    ``check`` one
<a name="L1422" class="line-number">1422 </a>    
<a name="L1423" class="line-number">1423 </a>    Refined the value checks, using the new VdtValueError subclasses
<a name="L1424" class="line-number">1424 </a>    
<a name="L1425" class="line-number">1425 </a>    Changed "is_string" to use "is_list"
<a name="L1426" class="line-number">1426 </a>    
<a name="L1427" class="line-number">1427 </a>    Added many more code tests
<a name="L1428" class="line-number">1428 </a>    
<a name="L1429" class="line-number">1429 </a>    Changed the "bool" value type to "boolean"
<a name="L1430" class="line-number">1430 </a>    
<a name="L1431" class="line-number">1431 </a>    Some more code cleanup
<a name="L1432" class="line-number">1432 </a>    
<a name="L1433" class="line-number">1433 </a>    2005/07/17
<a name="L1434" class="line-number">1434 </a>    ----------
<a name="L1435" class="line-number">1435 </a>    
<a name="L1436" class="line-number">1436 </a>    By Nicola Larosa
<a name="L1437" class="line-number">1437 </a>    
<a name="L1438" class="line-number">1438 </a>    Code tests converted to doctest format and placed in the respective
<a name="L1439" class="line-number">1439 </a>    docstrings, so they are automatically checked, and easier to update
<a name="L1440" class="line-number">1440 </a>    
<a name="L1441" class="line-number">1441 </a>    Changed local vars "min" and "max" to "min_len", "max_len", "min_val" and
<a name="L1442" class="line-number">1442 </a>    "max_val", to avoid shadowing the builtin functions (but left function
<a name="L1443" class="line-number">1443 </a>    parameters alone)
<a name="L1444" class="line-number">1444 </a>    
<a name="L1445" class="line-number">1445 </a>    Uniformed value check function names to is_* convention
<a name="L1446" class="line-number">1446 </a>    
<a name="L1447" class="line-number">1447 </a>    ``date`` type name changed to ``timestamp``
<a name="L1448" class="line-number">1448 </a>    
<a name="L1449" class="line-number">1449 </a>    Avoided some code duplication in list check functions
<a name="L1450" class="line-number">1450 </a>    
<a name="L1451" class="line-number">1451 </a>    Some more code cleanup
<a name="L1452" class="line-number">1452 </a>    
<a name="L1453" class="line-number">1453 </a>    2005/07/09
<a name="L1454" class="line-number">1454 </a>    ----------
<a name="L1455" class="line-number">1455 </a>    
<a name="L1456" class="line-number">1456 </a>    Recoded the standard functions
<a name="L1457" class="line-number">1457 </a>    
<a name="L1458" class="line-number">1458 </a>    2005/07/08
<a name="L1459" class="line-number">1459 </a>    ----------
<a name="L1460" class="line-number">1460 </a>    
<a name="L1461" class="line-number">1461 </a>    Improved paramfinder regex
<a name="L1462" class="line-number">1462 </a>    
<a name="L1463" class="line-number">1463 </a>    Ripped out all the regex stuff, checks, and the example functions
<a name="L1464" class="line-number">1464 </a>    (to be replaced !)
<a name="L1465" class="line-number">1465 </a>    
<a name="L1466" class="line-number">1466 </a>    2005/07/06
<a name="L1467" class="line-number">1467 </a>    ----------
<a name="L1468" class="line-number">1468 </a>    
<a name="L1469" class="line-number">1469 </a>    By Nicola Larosa
<a name="L1470" class="line-number">1470 </a>    
<a name="L1471" class="line-number">1471 </a>    Code cleanup
<a name="L1472" class="line-number">1472 </a>"""</span><span class="python-text"></span>
</pre>
</body>
</html>
