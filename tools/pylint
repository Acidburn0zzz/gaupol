#!/bin/bash

# Check code with PyLint.
# Usage: See pylint --help.

pylint --rcfile=$(dirname "$0")/data/pylintrc $@ \
\
    | egrep -v "Instance of 'None' has no '.+?' member" \
    | egrep -v "Instance of 'Test.+?' has no '.+?' member" \
    | egrep -v "No name '.+?' in module '.+?\.test\.?'" \
\
    | egrep -v "Instance of 'Section' has no '.+?' member" \
    | egrep -v "Instance of 'int' has no '.+?' member" \
    | egrep -v "Module 'gaupol\.gtk\.\.?conf' has no '.+?' member" \
    | egrep -v "Unused import AdvSubStationAlpha" \
    | egrep -v "Unused import MPL2" \
    | egrep -v "Unused import MPsub" \
    | egrep -v "Unused import MicroDVD" \
    | egrep -v "Unused import SubRip" \
    | egrep -v "Unused import SubStationAlpha" \
    | egrep -v "Unused import SubViewer2" \
    | egrep -v "Unused import TMPlayer" \
    | egrep -v "Unused import [A-Z]+" \
\
    | sed "s/\*\+ Module \(.*\)$/<\1>/" \
    | sed "s/>$/>\n</" \
    | sed "/<$/{N;/<\n./D}" \
    | sed "/>$/{N;/>\n</D}" \
    | sed "s/[<>]$//" \
    | egrep -v ^$ \
    | sed "s/^</\n\xE2\x97\x8F /"
