Checklist for Making a New Release
==================================

Table of Contents

  1. Create branch
  2. Get translations
  3. Make sure Gaupol works
  4. Bump version number
  5. Tag subversion
  6. Prepare files for release
  7. Spread the word


1. Create branch (only for bug-fix releases)
============================================

  o Create a brach from tagged x.y.0 if branch doesn't already exist

     svn copy svn+ssh://osmo@svn.gna.org/svn/gaupol/tags/x.y.0 \
              svn+ssh://osmo@svn.gna.org/svn/gaupol/branches/x.y

  o Check out branch

     svn co svn+ssh://osmo@svn.gna.org/svn/gaupol/branches/x.y

  o Bring all bug-fix changes from trunk to branch.

  o Add entry to ChangeLog and commit changes to subversion branch.


2. Get translations
===================

  o Send word to translators, that a new release is coming.

  o Check received translations.

      * Headers

      * UTF-8 encoding

      * Syntactical correctness

          msgfmt -cv <lang>.po

  o Merge all translations of file "gaupol.desktop".

  o Add names of all new translators to the about dialog

      lib/gaupol/gtk/dialogs/about.py

  o Add entries to ChangeLogs and commit changes to subversion.


3. Make sure Gaupol works
=========================

  o Check the list of open bugs and make sure all bugs scheduled for
    this release are fixed.

      http://gna.org/bugs/?func=browse&set=open&group=gaupol

  o Check the "TODO" file for anything undone for this release.

  o Search the source code for "TODO:" and "FIX:" and fix anything that
    needs to be fixed for this release.

  o Search the source code for "print". All debug printing should be
    removed or converted to logging.

  o Run PyChecker

      ./gaupol -c | grep -v "Using is None" | grep -v "Using is not None" | sort

  o Make sure all files are in the subversion repository

      svn status | grep -v .pyc

  o Run Gaupol from the source directory and check that it works

      ./gaupol

  o Install Gaupol and check that it works

      ./setup.py install --prefix=/tmp/gaupol
      /tmp/gaupol/bin/gaupol

  o Check the installation directory /tmp/gaupol. Make sure all files
    are in right places.

  o Uninstall Gaupol and make sure it works

      ./setup.py uninstall


4. Bump version number
======================

  o Bump version number

      lib/gaupol/__init__.py

  o Move all items concerning this release from the "TODO" file to the
    "NEWS" file.

  o Add ChangeLog entries noting that a release took place

      ChangeLog
      po/ChangeLog

  o Commit changes to subversion.

  o For bugfix releases, repeat for trunk.


5. Tag subversion
=================

  o For major or minor releases

      svn copy svn+ssh://osmo@svn.gna.org/svn/gaupol/trunk \
               svn+ssh://osmo@svn.gna.org/svn/gaupol/tags/x.y.z

  o For bug-fix releases

      svn copy svn+ssh://osmo@svn.gna.org/svn/gaupol/branches/x.y \
               svn+ssh://osmo@svn.gna.org/svn/gaupol/tags/x.y.z


6. Prepare files for release
============================

  o Build tarballs

      ./setup.py sdist --formats bztar,gztar

  o Cut news and and changes files to relevant parts

      dist/x.y/gaupol-x.y.z.news
      dist/x.y/gaupol-x.y.z.changes

  o Move tarballs into release directory.

  o If making a bug-fix release, remove previous symlink.

  o Sync release directory x.y with Gna! download area

      rsync --delete -avr --rsh="ssh" . \
            osmo@download.gna.org:/upload/gaupol/x.y/

  o Upload latest.txt

      scp latest.txt     osmo@download.gna.org:/upload/gaupol/
      scp latest.txt.sig osmo@download.gna.org:/upload/gaupol/


7. Spread the word
==================

  o Edit the download section of Gaupol website.

  o Post a news item at the Gaupol project page

      http://gna.org/news/submit.php?group=gaupol

  o Send e-mail to Gaupol-announcements mailing list

      gaupol-announcements@gna.org

  o Update third-party sites

      http://www.gnomefiles.com/devs/devcorner.php
      http://freshmeat.net/projects/gaupol
