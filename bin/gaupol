#!/usr/bin/env python

import os
import sys

def get_running_from_source():
    if not "__file__" in globals(): return False
    parent = os.path.dirname(os.path.abspath(__file__))
    path = os.path.join(parent, "..", "data", "gaupol.desktop.in")
    return os.path.isfile(path)

def prepare_paths():
    if not get_running_from_source(): return
    parent = os.path.dirname(os.path.abspath(__file__))
    path = os.path.abspath(os.path.join(parent, ".."))
    sys.path.insert(0, path)
    import gaupol, gtk
    icon_theme = gtk.icon_theme_get_default()
    path = os.path.join(gaupol.DATA_DIR, "icons")
    icon_theme.append_search_path(path)

prepare_paths()
import gaupol.gtk
gaupol.gtk.main.main(sys.argv[1:])
