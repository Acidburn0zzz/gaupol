<!DOCTYPE html
  PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
  "DTD/xhtml1-strict.dtd">
<html>
  <head>
    <title>API docs for &ldquo;gaupol.gtk.conf.configobj&rdquo;</title>
    <meta content="text/html;charset=utf-8" http-equiv="Content-Type" />
    <link href="apidocs.css" type="text/css" rel="stylesheet" />
    
    
  </head>
  <body>
    <h1 class="module">Module g.g.c.configobj</h1>
    <p>
      <span id="part">Part of <a href="gaupol.html">gaupol</a>.<a href="gaupol.gtk.html">gtk</a>.<a href="gaupol.gtk.conf.html">conf</a></span>
      <a href="gaupol/gtk/conf/configobj.py.html">View Source</a>
      
    </p>
    <div>
      
    </div>
    <div class="undocumented">No module docstring</div>
    
    
    <div id="splitTables">
      <table class="children sortable" id="id270">
  
  
  
  
  <tr class="function">
    
    
    <td>Function</td>
    <td><a href="gaupol.gtk.conf.configobj.html#enumerate">enumerate</a></td>
    <td><span><pre class="literalblock">
enumerate for Python 2.2.
</pre>
</span></td>
  </tr><tr class="function">
    
    
    <td>Function</td>
    <td><a href="gaupol.gtk.conf.configobj.html#getObj">getObj</a></td>
    <td><span class="undocumented">Undocumented</span></td>
  </tr><tr class="class">
    
    
    <td>Class</td>
    <td><a href="gaupol.gtk.conf.configobj.UnknownType.html">UnknownType</a></td>
    <td><span class="undocumented">Undocumented</span></td>
  </tr><tr class="class">
    
    
    <td>Class</td>
    <td><a href="gaupol.gtk.conf.configobj.Builder.html">Builder</a></td>
    <td><span class="undocumented">Undocumented</span></td>
  </tr><tr class="function">
    
    
    <td>Function</td>
    <td><a href="gaupol.gtk.conf.configobj.html#unrepr">unrepr</a></td>
    <td><span class="undocumented">Undocumented</span></td>
  </tr><tr class="function">
    
    
    <td>Function</td>
    <td><a href="gaupol.gtk.conf.configobj.html#_splitlines">_splitlines</a></td>
    <td><span><pre class="literalblock">
Split a string on lines, without losing line endings or truncating.
</pre>
</span></td>
  </tr><tr class="class">
    
    
    <td>Class</td>
    <td><a href="gaupol.gtk.conf.configobj.ConfigObjError.html">ConfigObjError</a></td>
    <td><span><pre class="literalblock">
This is the base class for all errors that ConfigObj raises.
</pre>
</span></td>
  </tr><tr class="class">
    
    
    <td>Class</td>
    <td><a href="gaupol.gtk.conf.configobj.NestingError.html">NestingError</a></td>
    <td><span><pre class="literalblock">
This error indicates a level of nesting that doesn't match.
</pre>
</span></td>
  </tr><tr class="class">
    
    
    <td>Class</td>
    <td><a href="gaupol.gtk.conf.configobj.ParseError.html">ParseError</a></td>
    <td><span><pre class="literalblock">
This error indicates that a line is badly written.
</pre>
</span></td>
  </tr><tr class="class">
    
    
    <td>Class</td>
    <td><a href="gaupol.gtk.conf.configobj.DuplicateError.html">DuplicateError</a></td>
    <td><span><pre class="literalblock">
The keyword or section specified already exists.
</pre>
</span></td>
  </tr><tr class="class">
    
    
    <td>Class</td>
    <td><a href="gaupol.gtk.conf.configobj.ConfigspecError.html">ConfigspecError</a></td>
    <td><span><pre class="literalblock">
An error occured whilst parsing a configspec.
</pre>
</span></td>
  </tr><tr class="class">
    
    
    <td>Class</td>
    <td><a href="gaupol.gtk.conf.configobj.InterpolationError.html">InterpolationError</a></td>
    <td><span><pre class="literalblock">
Base class for the two interpolation errors.
</pre>
</span></td>
  </tr><tr class="class">
    
    
    <td>Class</td>
    <td><a href="gaupol.gtk.conf.configobj.InterpolationLoopError.html">InterpolationLoopError</a></td>
    <td><span><pre class="literalblock">
Maximum interpolation depth exceeded in string interpolation.
</pre>
</span></td>
  </tr><tr class="class">
    
    
    <td>Class</td>
    <td><a href="gaupol.gtk.conf.configobj.RepeatSectionError.html">RepeatSectionError</a></td>
    <td><span><pre class="literalblock">
This error indicates additional sections in a section with a
</pre>
</span></td>
  </tr><tr class="class">
    
    
    <td>Class</td>
    <td><a href="gaupol.gtk.conf.configobj.MissingInterpolationOption.html">MissingInterpolationOption</a></td>
    <td><span><pre class="literalblock">
A value specified for interpolation was missing.
</pre>
</span></td>
  </tr><tr class="class">
    
    
    <td>Class</td>
    <td><a href="gaupol.gtk.conf.configobj.UnreprError.html">UnreprError</a></td>
    <td><span><pre class="literalblock">
An error parsing in unrepr mode.
</pre>
</span></td>
  </tr><tr class="class">
    
    
    <td>Class</td>
    <td><a href="gaupol.gtk.conf.configobj.InterpolationEngine.html">InterpolationEngine</a></td>
    <td><span><pre class="literalblock">
A helper class to help perform string interpolation.
</pre>
</span></td>
  </tr><tr class="class">
    
    
    <td>Class</td>
    <td><a href="gaupol.gtk.conf.configobj.ConfigParserInterpolation.html">ConfigParserInterpolation</a></td>
    <td><span><pre class="literalblock">
Behaves like ConfigParser.
</pre>
</span></td>
  </tr><tr class="class">
    
    
    <td>Class</td>
    <td><a href="gaupol.gtk.conf.configobj.TemplateInterpolation.html">TemplateInterpolation</a></td>
    <td><span><pre class="literalblock">
Behaves like string.Template.
</pre>
</span></td>
  </tr><tr class="class">
    
    
    <td>Class</td>
    <td><a href="gaupol.gtk.conf.configobj.Section.html">Section</a></td>
    <td><span><pre class="literalblock">
A dictionary-like object that represents a section in a config file.
</pre>
</span></td>
  </tr><tr class="class">
    
    
    <td>Class</td>
    <td><a href="gaupol.gtk.conf.configobj.ConfigObj.html">ConfigObj</a></td>
    <td><span><pre class="literalblock">
An object to read, create, and write config files.
</pre>
</span></td>
  </tr><tr class="class">
    
    
    <td>Class</td>
    <td><a href="gaupol.gtk.conf.configobj.SimpleVal.html">SimpleVal</a></td>
    <td><span><pre class="literalblock">
A simple validator.
</pre>
</span></td>
  </tr><tr class="function">
    
    
    <td>Function</td>
    <td><a href="gaupol.gtk.conf.configobj.html#flatten_errors">flatten_errors</a></td>
    <td><span><pre class="literalblock">
An example function that will turn a nested dictionary of results
</pre>
</span></td>
  </tr>
  
</table>
      
      
    </div>
    
    
    
    <div class="function">
        <a name="gaupol.gtk.conf.configobj.enumerate"></a>
        <a name="enumerate"></a>
        <div class="functionHeader">
        def enumerate(obj):
        <a href="gaupol/gtk/conf/configobj.py.html#L99" class="functionSourceLink">
        
        (source)
      </a>
      </div>
        <div class="functionBody">
          
          <div><pre class="literalblock">
enumerate for Python 2.2.
</pre>
<table class="fieldTable"></table></div>
        </div>
      </div><div class="function">
        <a name="gaupol.gtk.conf.configobj.getObj"></a>
        <a name="getObj"></a>
        <div class="functionHeader">
        def getObj(s):
        <a href="gaupol/gtk/conf/configobj.py.html#L160" class="functionSourceLink">
        
        (source)
      </a>
      </div>
        <div class="functionBody">
          
          <div class="undocumented">Undocumented</div>
        </div>
      </div><div class="function">
        <a name="gaupol.gtk.conf.configobj.unrepr"></a>
        <a name="unrepr"></a>
        <div class="functionHeader">
        def unrepr(s):
        <a href="gaupol/gtk/conf/configobj.py.html#L225" class="functionSourceLink">
        
        (source)
      </a>
      </div>
        <div class="functionBody">
          
          <div class="undocumented">Undocumented</div>
        </div>
      </div><div class="function">
        <a name="gaupol.gtk.conf.configobj._splitlines"></a>
        <a name="_splitlines"></a>
        <div class="functionHeader">
        def _splitlines(instring):
        <a href="gaupol/gtk/conf/configobj.py.html#L230" class="functionSourceLink">
        
        (source)
      </a>
      </div>
        <div class="functionBody">
          
          <div><pre class="literalblock">
Split a string on lines, without losing line endings or truncating.
</pre>
<table class="fieldTable"></table></div>
        </div>
      </div><div class="function">
        <a name="gaupol.gtk.conf.configobj.flatten_errors"></a>
        <a name="flatten_errors"></a>
        <div class="functionHeader">
        def flatten_errors(cfg, res, levels=None, results=None):
        <a href="gaupol/gtk/conf/configobj.py.html#L2157" class="functionSourceLink">
        
        (source)
      </a>
      </div>
        <div class="functionBody">
          
          <div><pre class="literalblock">
An example function that will turn a nested dictionary of results
(as returned by ``ConfigObj.validate``) into a flat list.

``cfg`` is the ConfigObj instance being checked, ``res`` is the results
dictionary returned by ``validate``.

(This is a recursive function, so you shouldn't use the ``levels`` or
``results`` arguments - they are used by the function.

Returns a list of keys that failed. Each member of the list is a tuple :
::

    ([list of sections...], key, result)

If ``validate`` was called with ``preserve_errors=False`` (the default)
then ``result`` will always be ``False``.

*list of sections* is a flattened list of sections that the key was found
in.

If the section was missing then key will be ``None``.

If the value (or section) was missing then ``result`` will be ``False``.

If ``validate`` was called with ``preserve_errors=True`` and a value
was present, but failed the check, then ``result`` will be the exception
object returned. You can use this as a string that describes the failure.

For example *The value &quot;3&quot; is of the wrong type*.

&gt;&gt;&gt; import validate
&gt;&gt;&gt; vtor = validate.Validator()
&gt;&gt;&gt; my_ini = '''
...     option1 = True
...     [section1]
...     option1 = True
...     [section2]
...     another_option = Probably
...     [section3]
...     another_option = True
...     [[section3b]]
...     value = 3
...     value2 = a
...     value3 = 11
...     '''
&gt;&gt;&gt; my_cfg = '''
...     option1 = boolean()
...     option2 = boolean()
...     option3 = boolean(default=Bad_value)
...     [section1]
...     option1 = boolean()
...     option2 = boolean()
...     option3 = boolean(default=Bad_value)
...     [section2]
...     another_option = boolean()
...     [section3]
...     another_option = boolean()
...     [[section3b]]
...     value = integer
...     value2 = integer
...     value3 = integer(0, 10)
...         [[[section3b-sub]]]
...         value = string
...     [section4]
...     another_option = boolean()
...     '''
&gt;&gt;&gt; cs = my_cfg.split('\n')
&gt;&gt;&gt; ini = my_ini.split('\n')
&gt;&gt;&gt; cfg = ConfigObj(ini, configspec=cs)
&gt;&gt;&gt; res = cfg.validate(vtor, preserve_errors=True)
&gt;&gt;&gt; errors = []
&gt;&gt;&gt; for entry in flatten_errors(cfg, res):
...     section_list, key, error = entry
...     section_list.insert(0, '[root]')
...     if key is not None:
...        section_list.append(key)
...     else:
...         section_list.append('[missing]')
...     section_string = ', '.join(section_list)
...     errors.append((section_string, ' = ', error))
&gt;&gt;&gt; errors.sort()
&gt;&gt;&gt; for entry in errors:
...     print entry[0], entry[1], (entry[2] or 0)
[root], option2  =  0
[root], option3  =  the value &quot;Bad_value&quot; is of the wrong type.
[root], section1, option2  =  0
[root], section1, option3  =  the value &quot;Bad_value&quot; is of the wrong type.
[root], section2, another_option  =  the value &quot;Probably&quot; is of the wrong type.
[root], section3, section3b, section3b-sub, [missing]  =  0
[root], section3, section3b, value2  =  the value &quot;a&quot; is of the wrong type.
[root], section3, section3b, value3  =  the value &quot;11&quot; is too big.
[root], section4, [missing]  =  0
</pre>
<table class="fieldTable"></table></div>
        </div>
      </div>
    
    <address>
      <a href="index.html">API Documentation</a> for <a href="http://home.gna.org/gaupol/">Gaupol</a>, generated by <a href="http://codespeak.net/~mwh/pydoctor/">pydoctor</a>.
    </address>
  </body>
</html>